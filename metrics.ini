[Global]
FallbackTheme=_fallback


[Common]
# Sets the default "units" for the window.  If the window aspect is different
# from the theme aspect, one of these two numbers is scaled up to match.
ScreenHeight=1080

NoScoreName="STARLGHT"

OverlayScreens="ScreenSystemLayer,ScreenSyncOverlay,ScreenStatsOverlay,ScreenDebugOverlay,ScreenInstallOverlay"

#InitialScreen=Branch.WarningOrAlert()
InitialScreen="ScreenClear"
AutoSetStyle=false
ImageCache="Banner,Background,Jacket,Disc"
StepsTypesToHide="dance_threepanel,lights_cabinet"

# Used for LuaTiming
UseAdvancedJudgments=true
DefaultJudgment="DDR Modern"

[ProfileManager]
# I wouldn't change these either.
FixedProfiles=false
NumFixedProfiles=1

[SongManager]
ExtraStagePlayerModifiers=
ExtraStageStageModifiers="failimmediatecontinue,norecover"
OMESPlayerModifiers=
OMESStageModifiers="failimmediate,suddendeath"

[GameState]
DefaultSort="Group"
DefaultSong="128beat"
# How good of a grade you have to get to get an ES/OMES. Locked to an 'AA'
# note: we don't actually do this here now
# and how difficult that song you got has to be
MinDifficultyForExtra="Difficulty_Hard"
# System Direction
AreStagePlayerModsForced=true
AreStageSongModsForced=false
# Let players join while you play if they put in some coins
# aw, c'mon.
AllowLateJoin=true
# Various feats that you can earn
ProfileRecordFeats=true
CategoryRecordFeats=true
# Disallow bad names
UseNameBlacklist=false
AllowExtra=true
AllowExtra2=false
# I'm pretty sure SN2 onward let you change difficulty, at least on ES
LockExtraStageSelection=false
# [sm-ssc] Normally, in event mode, the premium value is ignored. Set this
# metric to true to re-gain that behavior.
DisablePremiumInEventMode=false
# Let edit steps be allowed for earning extra stages.
EditAllowedForExtra=false

[CodeDetector]
# For Future Reference:
# @ = Holding
# - = In Conjuction With / Then
# ~ = Released
# + = At The Same Time
ModeMenu1=""
ModeMenu2=""
NextSort1=
NextSort2=
NextSort3=
NextSort4=
NextSteps2=
PrevSteps2=
CloseCurrentFolder="MenuUp-MenuDown"
NextGroup=
PrevGroup=
CancelTwoPartSelectButton1=
CancelTwoPartSelectButton2=

#############################################################################
# GENERIC CLASSES
#############################################################################
#
# Here we define the "defaults" for larger classes of screens rather than
# specific screens.
#
[ScreenSystemLayer]
Class="ScreenSystemLayer"
Fallback="Screen"

ShowCreditDisplay=ThemePrefs.Get("BurnInProtect")
CreditsJoinOnly=false

CreditsP1X=SCREEN_LEFT+102
CreditsP1Y=SCREEN_BOTTOM-10
CreditsP1RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP1ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP1OnCommand=zoom,0.8;
CreditsP1OffCommand=

CreditsP2X=SCREEN_RIGHT-102
CreditsP2Y=SCREEN_BOTTOM-10
CreditsP2RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP2CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP2PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP2ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP2OnCommand=zoom,0.8;
CreditsP2OffCommand=

[ScreenDebugOverlay]
BackgroundColor=color("0,0,0,0.8")

LineOnColor=Color.White
LineOffColor=color("0.5,0.5,0.5,1")
LineStartY=SCREEN_TOP+50
LineSpacing=16
LineButtonX=SCREEN_CENTER_X+280
LineFunctionX=SCREEN_CENTER_X+300

ButtonTextOnCommand=NoStroke;zoom,0.6;shadowlength,1
ButtonTextToggledCommand=linear,0.025;textglowmode,'TextGlowMode_Inner';glow,color("1,0,0,1");sleep,0.125;decelerate,0.2;glow,color("1,0,0,0");
FunctionTextOnCommand=NoStroke;zoom,0.6;shadowlength,1

PageStartX=SCREEN_CENTER_X+200
PageSpacingX=200
PageTextOnCommand=NoStroke;zoom,0.75;strokecolor,Color.Outline;
PageTextGainFocusCommand=diffuse,color("1,1,1,1");
PageTextLoseFocusCommand=diffuse,color("0.6,0.6,0.6,1")

DebugMenuHeaderX=SCREEN_LEFT+80
DebugMenuHeaderY=SCREEN_TOP+18
DebugMenuHeaderOnCommand=diffusebottomedge,color("0.675,0.675,0.675,1");strokecolor,Color.Outline
DebugMenuHeaderOffCommand=

HeaderTextX=SCREEN_LEFT+80
HeaderTextY=SCREEN_TOP+18
HeaderTextOnCommand=textglowmode,'TextGlowMode_Inner';glowshift;effectperiod,4;diffusebottomedge,color("0.75,0.75,0.75,1");strokecolor,Color.Outline
HeaderTextOffCommand=
#


[ScreenStatsOverlay]
Class="ScreenStatsOverlay"
Fallback="Screen"
StatsX=SCREEN_RIGHT-8
StatsY=SCREEN_TOP+10
StatsOnCommand=halign,1;valign,0;shadowlength,1;zoom,1;strokecolor,Color.Black
ShowSkips=true
SkipX=SCREEN_RIGHT-100
SkipY=SCREEN_BOTTOM-100
SkipOnCommand=zoom,1
SkipWidth=190
SkipSpacingY=14
#

# Defaults for most top-level screens
[ScreenWithMenuElements]
InTransitionSeconds=0
OutTransitionSeconds=0
CancelTransitionSeconds=0
ShowHeader=true
HeaderX=
HeaderY=
FooterX=
FooterY=
ShowFooter=false
ShowHelp=false
HelpX=_screen.cx
HelpY=SCREEN_BOTTOM-50
HelpOnCommand=draworder,200;zoomy,0;sleep,0.2;linear,0.1;zoomy,1
HelpOffCommand=linear,0.1;zoomy,0

StopMusicOnBack=true

TimerMetricsGroup="MenuTimer"
TimerX=SCREEN_RIGHT-200
TimerY=SCREEN_TOP+100
TimerOnCommand=draworder,2;zoom,0;linear,0.25;zoom,0.75
TimerOffCommand=linear,0.25;zoom,0;
TimerStealth=false

[ScreenClear]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen=Branch.WarningOrAlert()
ForceTimer=true
TimerStealth=true
TimerSeconds=1
TimerOnCommand=zoom,0

[ScreenPotatoPC]
Fallback="ScreenWarning"
NextScreen="ScreenMDSplash"
TimerSeconds=8

[ScreenMDSplash]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenDisclaimer"
ForceTimer=true
TimerStealth=true
TimerSeconds=10
TimerOnCommand=zoom,0

[ScreenAlert]
Fallback="ScreenWithMenuElements"

[ScreenGraphicsAlert]
Fallback="ScreenAlert"
NextScreen="ScreenDevBuild"
ShowHeader=true
ShowFooter=false
TimerSeconds=0
TimerOnCommand=zoom,0
StopMusicOnBack=true

[ScreenOldSM]
Fallback="ScreenAlert"
NextScreen=Branch.AfterOLDSM()
ShowHeader=true
ShowFooter=false
TimerSeconds=0
TimerOnCommand=zoom,0
StopMusicOnBack=true

[ScreenDevBuild]
Fallback="ScreenAlert"
#Disabling for now as the graphic still has DDR branding baked into it.
#NextScreen="ScreenPotatoPC"
NextScreen="ScreenMDSplash"
ShowHeader=true
ShowFooter=false
TimerSeconds=0
TimerOnCommand=zoom,0
StopMusicOnBack=true

[ScreenWithMenuElementsBlank]
Class="ScreenWithMenuElements"
Fallback="ScreenWithMenuElements"

# This is meant to show titles for menu screens, which we don't want in some
# places (such as the attract loop).
ShowHeader=false
WaitForChildrenBeforeTweeningOut=false

[MenuTimer]
WarningStart=10
WarningBeepStart=10
MaxStallSeconds=30
#
HurryUpTransition=20

#Text1OnCommand=stopeffect;stoptweening;xy,-24,24;zoom,0.6;diffusealpha,0.9;blend,Blend.Add;linear,0.25;sleep,0.75;queuecommand,"On"
#Text1FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.floor(fSeconds/10); return ""..digit end

#Text2OnCommand=stopeffect;stoptweening;xy,24,24;zoom,0.6;diffusealpha,0.9;blend,Blend.Add;linear,0.25;sleep,0.75;queuecommand,"On"
#Text2FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.mod(fSeconds,10); return ""..digit end

Text1OnCommand=stopeffect;skewx,-0.1;stoptweening;x,-34;y,0;linear,0.25;sleep,0.75;queuecommand,"On"
Text1FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.floor(fSeconds/10); return ""..digit end

Text2OnCommand=stopeffect;stoptweening;skewx,-0.1;zoom,0.75;x,32;y,-7;linear,0.25;sleep,0.75;queuecommand,"On"
Text2FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.mod(fSeconds,10); return ""..digit end


FrameX=11
FrameY=15
FrameOnCommand=
#
Warning10Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning9Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning8Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning7Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning6Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning5Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning4Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning3Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning2Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning1Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning0Command=diffuseshift;effectperiod,0.2;effectcolor1,Color.White;effectcolor2,Color.Red;

[MenuTimerNoSound]
Fallback="MenuTimer"
HurryUpTransition=0
WarningBeepStart=0
FrameOnCommand=visible,false

[ScreenAttract]
Class="ScreenAttract"
Fallback="ScreenWithMenuElementsBlank"

PrevScreen=Branch.FirstScreen()
StartScreen=Branch.AttractStart()
ForceTimer=true
TimerSeconds=5

# There is no ShowTimer metric, so this is how the timer is usually hidden
TimerOnCommand=visible,false
################################################################################
[ScreenOptions]
StopMusicOnBack=true

ContainerOnCommand=zoom,1.1;accelerate,0.3;diffusealpha,1;
ContainerOffCommand=accelerate,0.3;diffusealpha,0

[ScreenMapControllers]
DevicesY=SCREEN_TOP+160

LineScrollerOnCommand=%function(self) self:draworder(-1); self:xy(-480,200) self:zoom(1.5) self:setsecondsperitem(0.1) self:SetTransformFromHeight(24) end

[ScreenSTARLiGHTOptions]
Fallback="ScreenOptionsServiceChild"
InTransitionSeconds=0.75
OutTransitionSeconds=1
ShowHeader=false

NextScreen="ScreenPHOTwON"
PrevScreen="ScreenPHOTwON"
LineNames="SV,BurnIn,OptionsList,PauseMenu,AutoSelectStyle,MachinePrefsSaveToDisk,RadarLimit,CDTITLE,gComboUnderField,JudgeUnderField,ComboPerRow,CutIns,ComboColorMode,Convert,ShowDiffSelect,ShowHTP,ENS"
#LineEXScore="lua,ThemePrefRow('EXScore')"
LineConvert="lua,ThemePrefRow('ConvertScoresAndGrades')"
LineComboPerRow="lua,ThemePrefRow('ComboPerRow')"
LinegAuto="lua,ThemePrefRow('AutoSetStyle')"
LineAutoSelectStyle="lua,ThemePrefRow('AutoSelectStyle')"
LineMachinePrefsSaveToDisk="lua,ThemePrefRow('MachinePrefsSaveToDisk')"
LinegComboUnderField="lua,ThemePrefRow('ComboUnderField')"
LineJudgeUnderField="lua,ThemePrefRow('JudgeUnderField')"
LineCutIns="lua,ThemePrefRow('CutIns')"
LineShowDiffSelect="lua,ThemePrefRow('ShowDiffSelect')"
LineShowHTP="lua,ThemePrefRow('ShowHTP')"
LineComboColorMode="lua,ThemePrefRow('ComboColorMode')"
LineRadarLimit="lua,ThemePrefRow('RadarLimit')"
LineCDTITLE="lua,ThemePrefRow('CDTITLE')"
LineOptionsList="lua,ThemePrefRow('OLOrPO')"
LineBurnIn="lua,ThemePrefRow('BurnInProtect')"
LineENS="lua,ThemePrefRow('ExclusiveNS')"
LineSV="lua,ThemePrefRow('SV')"
LinePauseMenu="lua,ThemePrefRow('PauseMenu')"

[ScreenOptionsService]
ShowHeader=true
ScreenOutDelay=0
NumRowsShown=14
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-352)+(40*offsetFromCenter)) \
end

StopMusicOnBack=true

LineNames="Theme,GameType,GraphicSound,KeyConfig,Arcade,InputOptions,SoundGraphics,Profiles,Network,Advanced,Reload,XXCredits,Credits"
LineTheme="gamecommand;screen,ScreenPHOTwON;name,Theme Options"
LineXXCredits="gamecommand;name,XX Credits;screen,"..SetupCredits()

PageOnCommand=visible,false
PageOffCommand=
ContainerOnCommand=addy,SCREEN_HEIGHT;decelerate,0.2;addy,-SCREEN_HEIGHT
ContainerOffCommand=accelerate,0.2;addy,-SCREEN_HEIGHT
CursorTweenSeconds=0.15

LineHighlightP1OnCommand=zoom,1;x,SCREEN_CENTER_X;draworder,1
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,true
#
LineHighlightP2OnCommand=zoom,1;x,SCREEN_CENTER_X;draworder,1
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,true

ExplanationTogetherX=IsUsingWideScreen() and SCREEN_LEFT+400 or SCREEN_LEFT+160
ExplanationTogetherY=SCREEN_BOTTOM-260
ExplanationTogetherOnCommand=halign,0;valign,0;shadowlength,0;zoom,1.1;wrapwidthpixels,1400;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

SeparateExitRow=false
OptionRowExitMetricsGroup="OptionRowExit"
OptionRowNormalMetricsGroup="OptionRowService"

[ScreenOptionsServiceChild]
Fallback="ScreenOptionsService"
OptionRowNormalMetricsGroup="OptionRowServiceChild"

StopMusicOnBack=true

LineHighlightP1OnCommand=zoom,1;x,SCREEN_CENTER_X;draworder,1
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,true
#
LineHighlightP2OnCommand=zoom,1;x,SCREEN_CENTER_X;draworder,1
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,true

ExplanationTogetherX=IsUsingWideScreen() and SCREEN_LEFT+400 or SCREEN_LEFT+160
ExplanationTogetherY=SCREEN_BOTTOM-260
ExplanationTogetherOnCommand=halign,0;valign,0;shadowlength,0;zoom,1.1;wrapwidthpixels,1020;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[OptionRowService]
TitleX=SCREEN_CENTER_X-620
TitleY=0
TitleOnCommand=halign,0;strokecolor,color("0,0,0,0.25");uppercase,true;maxwidth,280
TitleGainFocusCommand=diffuse,Color("White")
TitleLoseFocusCommand=diffuse,Color("White")

ItemsStartX=SCREEN_CENTER_X-300
ItemsEndX=SCREEN_CENTER_X-160

ItemsGapX=12
ItemsMinBaseZoom=2.5
ItemOnCommand=uppercase,true;shadowlength,0;zoom,1
ItemGainFocusCommand=
ItemLoseFocusCommand=

ItemsLongRowP1X=SCREEN_CENTER_X-160
ItemsLongRowP2X=SCREEN_CENTER_X-160
ItemsLongRowSharedX=SCREEN_CENTER_X-160

ColorSelected=Color("White")
ColorNotSelected=Color("White")
ColorDisabled=Color("White")

[OptionRowServiceChild]
Fallback="OptionRowService"
ShowUnderlines=true

ItemsStartX=SCREEN_CENTER_X-300
ItemsEndX=SCREEN_CENTER_X+300
ItemsGapX=18
ItemsMinBaseZoom=0.5
ItemsLongRowSharedX=SCREEN_CENTER_X
ItemOnCommand=strokecolor,color("0,0,0,0.25");uppercase,true;maxwidth,400

[OptionRowExit]
FrameOnCommand=visible,true
FrameX=SCREEN_CENTER_X-620

ItemsMinBaseZoom=1
ItemOnCommand=halign,0;x,SCREEN_CENTER_X-620;uppercase,true;strokecolor,color("0,0,0,0.25");
ItemGainFocusCommand=diffuse,Color("White")
ItemLoseFocusCommand=diffuse,Color("White")

ItemsLongRowP1X=SCREEN_CENTER_X-1024
ItemsLongRowP2X=SCREEN_CENTER_X+1024
ItemsLongRowSharedX=SCREEN_CENTER_X-168

ColorSelected=Color("White")
ColorNotSelected=Color("White")
ColorDisabled=Color("White")

[ScreenPHOTwON]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.FirstScreen()
NextScreen=Branch.FirstScreen()
HandleBackButton=false
SharedSelection=true

StopMusicOnBack=true

ChoiceNames="1,2,3,4"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"
DefaultChoice="1"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"
# needed for detecting start input
CodeNames="Start,Back"
#ToggleEditMode
CodeStart="~Start"
CodeBack="~Back"
#CodeToggleEditMode="Up,Up,Down,Down,Left,Right,Left,Right,Select,Select,Select"

[ScreenSongOptions]
Fallback="ScreenPlayerOptions"

[ScreenPlayerOptions]
Fallback="ScreenOptions"
Class="ScreenPlayerOptions"
ShowFooter=false
ShowHeader=true

SaveOnExit=true

NumRowsShown=14
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-352)+(40*offsetFromCenter)) \
end

ContainerOnCommand=addy,SCREEN_HEIGHT;decelerate,0.2;addy,-SCREEN_HEIGHT
ContainerOffCommand=accelerate,0.2;addy,-SCREEN_HEIGHT

ShowHelp=false
ShowStyleIcon=false
WaitForChildrenBeforeTweeningOut=true

OptionRowNormalMetricsGroup="OptionRowPlayer"
OptionRowExitMetricsGroup="OptionRowPlayerExit"

AllowRepeatingChangeValueInput=true
WrapValueInRow=false
StopMusicOnBack=false

CursorTweenSeconds=0.15

ShowExitRow=true
SeparateExitRow=false

NavigationMode="normal"
InputMode="individual"
ForceAllPlayers=false
RepeatRate=12
RepeatDelay=0.5

LineHighlightP1OnCommand=x,_screen.cx
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,true
LineHighlightP2OnCommand=x,_screen.cx
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,true

ExplanationP1OnCommand=visible,false
ExplanationP2OnCommand=visible,false

LineNames="1,2,3,4,5,6,7,10,8,9,13,Steps,12,15,16"
Line1="lua,ArbitrarySpeedMods()"
#Line1="lua,SpeedModS()"
Line2="list,Accel"
Line3="lua,OptionRowAppearancePlusUseFile()"
Line4="list,Turn"
Line5="list,Hide"
Line6="list,Scroll"
Line7="lua,ExclusiveNoteskins()"
Line8="list,Freeze"
Line9="list,Jump"
Line10="list,Remove"
#Line12="lua,Gauge()"
Line12="list,Gauge"
Line13="lua,OptionRowScreenFilter()"
Line15="lua,OptionRowCharacters()"
LineMini="list,Mini"
LineSType="lua,ArbitrarySpeedMods2ModType()"
LineSteps="lua,StepsListing()"
Line16="lua,ListChooser()"

MoreX=SCREEN_CENTER_X
MoreY=SCREEN_CENTER_Y+58
MoreOnCommand=zoom,0.7
MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

[ScreenPlayerOptions2]
Fallback="ScreenPlayerOptions"
LineNames="2,3,4,C"
Line1="lua,OptionRowGuideLine()"
Line2="lua,OptionRowEX()"
Line3="lua,OptionRowBias()"
Line4="lua,OptionRowScoreLab()"
LineC="lua,ListChooser2()"


[ScreenPlayerOptions3]
Fallback="ScreenPlayerOptions"

LineNames="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,Timing,LC"
Line1="list,Acceleration"
Line2="list,Effect"
Line3="list,EffectsReceptor"
Line4="list,EffectsArrow"
Line5="list,Appearance2"
Line6="list,Turn2"
Line7="list,Insert"
Line8="list,RemoveCombinations"
Line9="list,RemoveFeatures"
Line10="list,Scroll2"
Line11="list,Holds2"
Line12="list,Mines"
Line13='list,Attacks'
Line14="list,PlayerAutoPlay"
Line15="list,Hide2"
Line16="list,Persp"
LineTiming="lua,SmartTimings()"
LineLC="lua,ListChooser3()"

[OptionRowPlayer]
Fallback="OptionRowServiceChild"

ItemsStartX=SCREEN_CENTER_X-300
ItemsEndX=SCREEN_CENTER_X+200
ItemsGapX=18
ItemsMinBaseZoom=0.5

ItemsLongRowP1X=SCREEN_CENTER_X-160
ItemsLongRowP2X=SCREEN_CENTER_X+160
ItemsLongRowSharedX=SCREEN_CENTER_X

ItemOnCommand=strokecolor,color("0,0,0,0.25");uppercase,true;maxwidth,180

[OptionRowPlayerExit]
Fallback="OptionRowPlayer"

TitleOnCommand=visible,false

ItemsStartX=WideScale(292,310)

[ScreenPlayerOptionsPopup]
Fallback="ScreenPlayerOptions"
CancelTransitionSeconds=1

ShowHeader=false
ShowFooter=false
TimerStealth=true
TimerSeconds=-1
OutTransitionSeconds=1

[OptionRowExitPlayer]
Fallback="OptionRow"
FrameOnCommand=visible,false
TitleOnCommand=visible,false
ItemOnCommand=visible,false

[ScreenOptionsMaster]
Fallback="ScreenOptions"
Class="ScreenOptionsMaster"
NoteSkinSortOrder=""

SpeedTypeExplanation="SpeedMod"
SpeedModSExplanation=

Speed2Menu="2"
Speed2MenuExplanation="SpeedMod"
Speed2MenuDefault=""
Speed2Menu,1="name,Speed2Type;screen,Speed2Type"
Speed2Menu,2="name,Speed2Value;screen,Speed2Value"
Speed2TypeExplanation="Speed2Type"
Speed2ValueExplanation="Speed2Value"

SongMenu="9"
SongMenuDefault=""
SongMenu,1="name,Speed2;screen,Speed2Menu"
SongMenu,2="name,Accel;screen,Accel"
SongMenu,3="name,NoteSkins;screen,NoteSkins"
SongMenu,4="name,Turn;screen,Turn"
SongMenu,5="name,Scroll;screen,Scroll"
SongMenu,6="name,Characters;screen,Characters"
SongMenu,7="name,Filter;screen,Filter"
SongMenu,8="name,DispMenu;screen,DispMenu"
SongMenu,9="name,Advanced;screen,AdvMenu"

DispMenu="9"
DispMenuDefault=""
DispMenuExplanation="DispMenu"
DispMenu,1="name,Hide;screen,Hide"
DispMenu,2="name,Bias;screen,Bias"
DispMenu,3="name,SCLab;screen,ScoreLabel"
DispMenu,4="name,Target;screen,TargetScore"
DispMenu,5="name,EX;screen,EX"
DispMenu,6="name,Judgment;screen,Judgment"
DispMenu,7="name,Combo;screen,Combo"
DispMenu,8="name,Perspective;screen,Persp"
DispMenu,9="name,GuideLine;screen,GuideLine"

AdvMenu="8"
AdvMenuDefault=""
AdvMenu,1="name,ResetOptions"
AdvMenu,2="name,RemoveMenu;screen,RemMenu"
AdvMenu,3="name,Appearance;screen,Appearance"
AdvMenu,4="name,Mini;screen,Mini"
AdvMenu,5="name,Gauge;screen,Gauge"
AdvMenu,6="name,Rate;screen,MusicRate"
AdvMenu,7="name,Fail;screen,Fail"
AdvMenu,8="name,TimingWindow;screen,TimingWindow"


#Who's Rem?
RemMenu="4"
RemMenuExplanation="Remove"
RemMenuDefault=""
RemMenu,1="name,Mines;screen,Mines"
RemMenu,2="name,Remove;screen,Remove"
RemMenu,3="name,Freeze;screen,Freeze"
RemMenu,4="name,Jump;screen,Jump"

Mini="1"
MiniDefault="mod,no mini"
Mini,1="mod,mini;name,Mini"


# ExitItem is an exit row with the "Exit" text as a menu item; ExitTitle
# uses the menu title.
ExitItem="1;together;SelectNone;showoneinrow"
ExitItemDefault=""
ExitItem,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitItem"

ExitTitle="1;together;SelectNone;showoneinrow"
ExitTitleDefault=""
ExitTitle,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitTitle"
# player options

SpeedModExplanation="SpeedMod"
SpeedModIcon=false
SpeedMod="3"
SpeedModDefault="mod,xmod"
SpeedMod,1="mod,xmod;name,xmod"
SpeedMod,2="mod,cmod;name,cmod"
SpeedMod,3="mod,mmod;name,mmod"

SpeedExplanation="Speed"
SpeedIcon=false
Speed="24"
SpeedDefault="mod,1x,no randomspeed"
Speed,1="mod,0.25x;name,x0.25"
Speed,2="mod,0.50x;name,x0.5"
Speed,3="mod,0.75x;name,x0.75"
Speed,4="mod,1x;name,x1"
Speed,5="mod,1.25x;name,x1.25"
Speed,6="mod,1.5x;name,x1.5"
Speed,7="mod,1.75x;name,x1.75"
Speed,8="mod,2x;name,x2"
Speed,9="mod,2.25x;name,x2.25"
Speed,10="mod,2.50x;name,x2.5"
Speed,11="mod,2.75x;name,x2.75"
Speed,12="mod,3x;name,x3"
Speed,13="mod,3.25x;name,x3.25"
Speed,14="mod,3.50x;name,x3.5"
Speed,15="mod,3.75x;name,x3.75"
Speed,16="mod,4x;name,x4"
Speed,17="mod,4.5x;name,x4.5"
Speed,18="mod,5x;name,x5"
Speed,19="mod,5.5x;name,x5.5"
Speed,20="mod,6x;name,x6"
Speed,21="mod,6.5x;name,x6.5"
Speed,22="mod,7x;name,x7"
Speed,23="mod,7.5x;name,x7.5"
Speed,24="mod,8x;name,x8"

AccelExplanation="Accel"
AccelIcon=false
Accel="4"
AccelDefault="mod,no boost,no brake,no wave,no expand,no boomerang"
Accel,1="name,Normal"
Accel,2="mod,boost;name,Boost"
Accel,3="mod,brake;name,Brake"
Accel,4="mod,wave;name,Wave"

AppearanceExplanation="Appearance"
AppearanceIcon=false
Appearance="4"
AppearanceDefault="mod,no hidden,no sudden,no stealth,no blink,no randomvanish"
Appearance,1="name,Visible"
Appearance,2="mod,hidden;name,Hidden"
Appearance,3="mod,sudden;name,Sudden"
Appearance,4="mod,stealth;name,Stealth"

TurnExplanation="Turn"
TurnIcon=false
Turn="5"
TurnDefault="mod,no turn"
Turn,1="name,Off"
Turn,2="mod,mirror;name,Mirror"
Turn,3="mod,left;name,Left"
Turn,4="mod,right;name,Right"
Turn,5="mod,shuffle;name,Shuffle"

HideExplanation="Hide"
HideIcon=false
Hide="2"
HideDefault="mod,no dark"
Hide,1="name,On"
Hide,2="mod,dark;name,Off"

ScrollExplanation="Scroll"
ScrollIcon=false
Scroll="2"
ScrollDefault="mod,no reverse,no split,no alternate,no cross"
Scroll,1="name,Standard"
Scroll,2="mod,reverse;name,Reverse"

FreezeExplanation="Freeze"
FreezeIcon=false
Freeze="2"
FreezeDefault="mod,no noholds"
Freeze,1="name,On"
Freeze,2="mod,noholds;name,Off"

JumpExplanation="Jump"
JumpIcon=false
Jump="2"
JumpDefault="mod,no nojumps"
Jump,1="name,On"
Jump,2="mod,nojumps;name,Off"

RemoveExplanation="Remove"
RemoveIcon=false
Remove="2"
RemoveDefault="mod,no little"
Remove,1="name,Off"
Remove,2="mod,little;name,On"

JudgeExplanation=false
JudgeIcon=false
Judge="2"
JudgeDefault="mod,no blind"
Judge,1="mod,blind;name,Off"
Judge,2="name,On"

GaugeExplanation="Gauge"
GaugeIcon=false
Gauge="3"
GaugeDefault=""
Gauge,1="mod,bar;mod,faildefault;name,Normal;setenv,RiskyMode,0"
Gauge,2="mod,battery;mod,4 lives;mod,failimmediate;name,4 Lives;setenv,RiskyMode,0"
Gauge,3="mod,battery;mod,1 lives;mod,failimmediate;name,Risky;setenv,RiskyMode,0"
Gauge,4="mod,battery;mod,1 lives;mod,failimmediate;name,Risky+;setenv,RiskyMode,1"

##Additional Options
FailExplanation="FailPO"
FailIcon=false
Fail="4"
FailDefault=""
Fail,1="mod,failimmediate;name,Immediate"
Fail,2="mod,failimmediatecontinue;name,ImmediateContinue"
Fail,3="mod,failatend;name,FailAtEnd"
Fail,4="mod,failoff;name,Off"

TimingWindowExplanation=true
SmartTimingsExplanation=true

MinesExplanation="Mines"
MinesIcon=false
Mines="4"
MinesDefault="mod,no nomines,no mines,no attackmines"
Mines,1="name,On"
Mines,2="mod,nomines;name,Off"
Mines,3="mod,mines;name,Add"
Mines,4="mod,attackmines;name,AttackMines"

AccelerationExplanation=false
AccelerationIcon=false
AccelerationDefault="mod, no expand,no boomerang"
Acceleration="3;selectmultiple"
Acceleration,1="name,Off"
Acceleration,2="mod,expand;name,Expand"
Acceleration,3="mod,boomerang;name,Boomerang"

EffectExplanation=false
Effect="13;selectmultiple"
EffectDefault="mod,no drunk,no dizzy,,no twirl,no roll,no confusion,no tiny,no flip,no invert,no tornado,no tipsy,no bumpy,no beat,no xmode"
Effect,1="mod,drunk;name,Drunk"
Effect,2="mod,dizzy;name,Dizzy"
Effect,3="mod,twirl;name,Twirl"
Effect,4="mod,roll;name,Roll"
Effect,5="mod,confusion;name,Confusion"
Effect,6="mod,tiny;name,Tiny"
Effect,7="mod,-100% mini;name,Big"
Effect,8="mod,flip;name,Flip"
Effect,9="mod,invert;name,Invert"
Effect,10="mod,tornado;name,Tornado"
Effect,11="mod,tipsy;name,Tipsy"
Effect,12="mod,bumpy;name,Bumpy"
Effect,13="mod,beat;name,Beat"
Effect,14="mod,45% xmode;name,XMode"

EffectsReceptorExplanation=false
EffectsReceptor="5;selectmultiple"
EffectsReceptorDefault="mod,no confusion,no invert,no flip,no xmode"
EffectsReceptor,1="mod,confusion;name,Confusion"
EffectsReceptor,2="mod,invert;name,Invert"
EffectsReceptor,3="mod,Flip;name,Flip"
EffectsReceptor,4="mod,-35% mini;name,Big"
EffectsReceptor,5="mod,45% xmode;name,XMode"

EffectsArrowExplanation=false
EffectsArrow="8;selectmultiple"
EffectsArrowDefault="mod,no drunk,no dizzy,no twirl,no roll,no beat,no tipsy,no tornado,no bumpy"
EffectsArrow,1="mod,drunk;name,Drunk"
EffectsArrow,2="mod,dizzy;name,Dizzy"
EffectsArrow,3="mod,twirl;name,Twirl"
EffectsArrow,4="mod,roll;name,Roll"
EffectsArrow,5="mod,beat;name,Beat"
EffectsArrow,6="mod,tipsy;name,Tipsy"
EffectsArrow,7="mod,50% tornado;name,Tornado"
EffectsArrow,8="mod,bumpy;name,Bumpy"

Appearance2Explanation=false
Appearance2="1;selectmultiple"
Appearance2Default="mod,no blink,no randomvanish"
Appearance2,1="mod,blink;name,Blink"

Turn2Explanation=false
Turn2="3;selectmultiple"
Turn2Default="mod,no turn"
Turn2,1="mod,backwards;name,Backwards"
Turn2,2="mod,supershuffle;name,SuperShuffle"
Turn2,3="mod,softshuffle;name,SoftShuffle"

InsertExplanation=false
Insert="7;selectmultiple"
InsertDefault="mod,no wide,no big,no quick,no skippy,no echo,no stomp,no bmrize"
Insert,1="mod,wide;name,Wide"
Insert,2="mod,big;name,Big"
Insert,3="mod,quick;name,Quick"
Insert,4="mod,bmrize;name,BMRize"
Insert,5="mod,skippy;name,Skippy"
Insert,6="mod,echo;name,Echo"
Insert,7="mod,stomp;name,Stomp"

RemoveCombinationsExplanation=false
RemoveCombinations="2;selectmultiple"
RemoveCombinationsDefault="mod,no nohands,no noquads"
RemoveCombinations,1="mod,nohands;name,NoHands"
RemoveCombinations,2="mod,noquads;name,NoQuads"

RemoveFeaturesExplanation=false
RemoveFeatures="4;selectmultiple"
RemoveFeaturesDefault="mod,no nostretch,no norolls,no nolifts,no nofakes"
RemoveFeatures,1="mod,nostretch;name,NoStretch"
RemoveFeatures,2="mod,norolls;name,NoRolls"
RemoveFeatures,3="mod,nolifts;name,NoLifts"
RemoveFeatures,4="mod,nofakes;name,NoFakes"

Scroll2Explanation=false
Scroll2="4;selectmultiple"
Scroll2Default="mod,no split,no alternate,no cross,no centered"
Scroll2,1="mod,split;name,Split"
Scroll2,2="mod,alternate;name,Alternate"
Scroll2,3="mod,cross;name,Cross"
Scroll2,4="mod,centered;name,Centered"

Holds2Explanation=false
Holds2="4;selectmultiple"
Holds2Default="mod,no planted,no twister,no holdrolls,no holdlifts"
Holds2,1="mod,planted;name,Planted"
Holds2,2="mod,twister;name,Twister"
Holds2,3="mod,holdrolls;name,HoldsToRolls"
Holds2,4=IsGame("kbx") and "mod,holdlifts;name,LiftHoldsToHolds" or "mod,holdlifts;name,HoldsToLiftHolds"

AttacksExplanation=false
Attacks="3"
AttacksDefault="mod,no randomattacks, no noattacks"
Attacks,1="name,On"
Attacks,2="mod,randomattacks;name,RandomAttacks"
Attacks,3="mod,noattacks;name,Off"

PlayerAutoPlayExplanation=false
PlayerAutoPlay="2"
PlayerAutoPlayDefault="mod,no playerautoplay"
PlayerAutoPlay,1="name,Off"
PlayerAutoPlay,2="mod,playerautoplay;name,On"

Hide2Explanation=false
Hide2="2;selectmultiple"
Hide2Default="mod,no blind,no cover"
Hide2,1="mod,blind;name,Blind"
Hide2,2="mod,80% cover;name,Cover"

PerspExplanation=false
Persp="5"
PerspDefault="mod,overhead"
Persp,1="mod,incoming;name,Incoming"
Persp,2="mod,overhead;name,Overhead"
Persp,3="mod,space;name,Space"
Persp,4="mod,hallway;name,Hallway"
Persp,5="mod,distant;name,Distant"

##Lua junk
TargetScoreExplanation=false
ExclusiveNoteskinsExplanation=false
NoteSkinsExplanation=false
LuaNoteSkinsExplanation=false
StepsExplanation=false
NoteSkinsIcon=false
CharactersExplanation=false
CharactersIcon=false
FilterExplanation="Filter"
FilterIcon="Filter"
ExitExplanation=false
GuideLineExplanation=true
FilterExplanation="Guideline"
ScoreLabelExplanation="ScoreLabel"
BiasExplanation="Bias"
MiniExplanation=false
EXExplanation="EX"
MusicRateExplanation=false
ListChooserExplanation=false
ListChooser2Explanation=false
ListChooser3Explanation=false
LifeTypeExplanation=false
BarDrainExplanation=false
BatLivesExplanation=false
AssistExplanation=false
RateExplanation=false
SoundEffectExplanation=false
AutoAdjustExplanation=false
BackgroundExplanation=false
SaveScoresExplanation=false
JudgmentExplanation=false
ComboExplanation=false

NoteSkins=0
Characters=0
Filter=0
ScoreLabel=0
Bias=0
TargetScore=0
EX=0
Judgment=0
Combo=0
GuideLine=0
TimingWindow=0
MusicRate=0
Speed2Type=0
Speed2Value=0
#############################################################################
# THE ATTRACT LOOP
#############################################################################
#
# For these screens, NextScreen means what comes after it in the loop.  In Home
# and Free Play modes, StartScreen is the one that you go to when you hit
# Start.  In Pay mode, StartScreen is the one that you are warped to when you
# insert a credit.
#

[ScreenWarning]
Class="ScreenAttract"
Fallback="ScreenAttract"
PlayMusic=false
NextScreen="ScreenCompany"
# Keep this synchronized with the Fade in the BGA
TimerSeconds=4.4

[ScreenDisclaimer]
Fallback="ScreenWarning"
NextScreen="ScreenWarning"
TimerSeconds=8


[ScreenCompany]
Class="ScreenAttract"
Fallback="ScreenAttract"

NextScreen="ScreenLogo"
PlayMusic=true

[ScreenMovie]
Class="ScreenAttract"
Fallback="ScreenAttract"
PlayMusic=true

NextScreen="ScreenLogo"
TimerSeconds=41
TimerStealth=true
ShowCreditDisplay=true

# This is the arcade attract version
[ScreenLogo]
Class="ScreenWithMenuElements"
NextScreen="ScreenDemonstration"
OutTransitionSeconds=0.3
TimerSeconds=70
TimerStealth=true
ForceTimer=true
# XXX Until we figure out how to make this what we want
ShowCreditDisplay=true
PlayMusic=true

[ScreenDemonstration]
Class="ScreenDemonstration"
Fallback="ScreenGameplay"
InTransitionSeconds=0.297

NextScreen="ScreenMDSplash"
StartScreen=Branch.AttractStart()
ShowStageDisplay=false
ShowStageFrame=false
StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
ScoreFrameY=-76
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP2OnCommand=visible,false
LifeP1X=IsUsingWideScreen() and _screen.cx-526 or _screen.cx-472
LifeP1Y=SCREEN_TOP+36
LifeP2X=IsUsingWideScreen() and _screen.cx+526 or _screen.cx+472
LifeP2Y=SCREEN_TOP+36
LifeP1OnCommand=zoom,IsUsingWideScreen() and 0.8 or 0.73;draworder,-1
LifeP2OnCommand=zoom,IsUsingWideScreen() and 0.8 or 0.73;rotationy,180;draworder,-1
LifeFrameOnCommand=visible,false
PlayMusic=true
TimerStealth=true
TimerOnCommand=visible,false
TimerSeconds=30


#############################################################################
# GAME SETUP
#############################################################################
[ScreenTitleJoin]
NextScreen="ScreenDemonstration"
TimerSeconds=10
ForceTimer=true
TimerStealth=true

ChoiceNames="Game"
ChoiceGame="text,START;screen,"..Branch.StartGame()

[ScreenTitleMenu]
ShowHeader=false
ChoiceNames=GAMESTATE:GetCoinMode() == "CoinMode_Home" and "Start" or "ArcStart"
ChoiceStart="text,START;screen,ScreenSelectMode"
ChoiceArcStart="text,START;screen,ScreenSelectProfile"
PrevScreen=Branch.FirstScreen()
#NextScreen="ScreenDemonstration"
NextScreen="ScreenMovie"
InTransitionSeconds=0.2

ForceTimer=true
TimerStealth=true
TimerSeconds=20
TimerOnCommand=zoom,0

ShowScroller=false
ShowIcon=false

[ScreenDDRNameEntry]
Fallback="ScreenWithMenuElements"
InTransitionSeconds=0.3
OutTransitionSeconds=1
PrevScreen=Branch.FirstScreen()
NextScreen="ScreenSelectStyle"
CodeNames="Left,Left2,Up,Up2,Right,Right2,Down,Down2,Select,Start,Back"
CodeLeft="+MenuLeft"	
CodeLeft2="Left"	
CodeUp="+MenuUp"	
CodeUp2="Up"
CodeRight="+MenuRight"
CodeRight2="Right"
CodeDown="+MenuDown"
CodeDown2="Down"
CodeSelect="Select"
CodeStart="Start"
CodeBack="Back"
StopMusicOnBack=true
RepeatRate=9
RepeatDelay=0.25

[ScreenSelectMode]
Fallback="ScreenTitleMenu"
InTransitionSeconds=0.5
OutTransitionSeconds=1

ShowHeader=true
ShowFooter=true
TimerOnCommand=visible,false

ForceTimer=false
# Override _fallback, which sends us back to ScreenInit
PrevScreen=Branch.FirstScreen()
NextScreen=Branch.FirstScreen()

ChoiceNames=GAMESTATE:GetCoinMode() == 'CoinMode_Home' and (SN3Debug and "Options,Edit,GameStart,Customize,Jukebox,Exit" or "Options,Edit,GameStart,Customize,Exit") or "GameStart"
DefaultChoice="GameStart"

ChoiceGameStart="applydefaultoptions;text,Music Play;playmode,regular;screen,"..Branch.StartGame()
ChoiceOptions="screen,ScreenOptionsService;text,OPTIONS"
ChoiceCourseStart="applydefaultoptions;text,Course;playmode,nonstop;screen,"..Branch.StartGame()
ChoiceEdit="text,Edit;screen,"..Branch.OptionsEdit()
#ChoiceEdit="screen,ScreenGameOver;text,Edit"
ChoiceCustomize="text,Customize;screen,ScreenPHOTwON"
ChoiceExit="screen,ScreenExit;text,EXIT"
ChoiceGameOver="screen,ScreenCredits;text,GameOver"
ChoiceNameTest="screen,ScreenDDRNameEntry;text,NAME TEST"
ChoiceJukebox="screen,ScreenJukeboxMenu;text,JUKEBOX"

ShowScroller=true
ShowIcon=false
WrapScroller=false
LoopScroller=false
# XXX InitCommands in metrics seem not to work a lot...???
ScrollerX=_screen.cx+260
ScrollerY=_screen.cy-40
ScrollerOnCommand=
ScrollerOffCommand=linear,0.2;addx,SCREEN_WIDTH
ScrollerNumItemsToDraw=10
# NOTE: You have to set SecondsPerItem > 0 or it won't animate
ScrollerSecondsPerItem=0.2
ScrollerSubdivisions=1
# XXX FIXME This is nicked from futurex, and it's ugly and stuff
# Also get new graphics for these which are all rendered in the same plane!
ScrollerTransform=function(self,ofs,i,n) \
	self:x(math.abs(96*(ofs))); \
	self:y(92*(ofs)); \
end

PerChoiceIconElement=false
PerChoiceScrollElement=false

CodeNames="BackgroundTest"
CodeBackgroundTest="Up,Up,Down,Down,Left,Right,Left,Right"

[ScreenSelectProfile]
WaitForChildrenBeforeTweening=true
Fallback="ScreenWithMenuElements"
Class="ScreenSelectProfile"
#
InTransitionSeconds=0.3
OutTransitionSeconds=1

NextScreen=Branch.AfterProfile()
PrevScreen=Branch.FirstScreen()
ScreenOnCommand=%function(self) self:lockinput(3); end;
#
ShowHeader=true
ShowFooter=true
TimerOnCommand=visible,false

CodeNames=SelectProfileKeys()
CodeUp="+Left"
CodeUp2="+MenuLeft"
CodeUp3="+Up"
CodeUp4="+MenuUp"
CodeDown="+Right"
CodeDown2="+MenuRight"
CodeDown3="+Down"
CodeDown4="+MenuDown"
# Holding Start let us skip ( annoying )
CodeStart="Start"
CodeBack="Back"
CodeCenter="Center"
CodeDownLeft="DownLeft"
CodeDownRight="DownRight"

ScreenOutDelay=0
ShowHelp=false
StopMusicOnBack=true

[ScreenSelectProfilePrefs]
Fallback="ScreenWithMenuElements"

NextScreen="ScreenSelectStyle"
PrevScreen=Branch.FirstScreen()
ScreenOnCommand=%function(self) self:lockinput(3); end;

ShowHeader=true
ShowFooter=true
TimerOnCommand=visible,false

ScreenOutDelay=0
ShowHelp=false
StopMusicOnBack=true

CodeNames=SelectProfileKeys()
CodeUp="+Left"
CodeUp2="+MenuLeft"
CodeUp3="+Up"
CodeUp4="+MenuUp"
CodeDown="+Right"
CodeDown2="+MenuRight"
CodeDown3="+Down"
CodeDown4="+MenuDown"
# Holding Start let us skip ( annoying )
CodeStart="Start"
CodeBack="Back"
CodeCenter="Center"
CodeDownLeft="DownLeft"
CodeDownRight="DownRight"

[ScreenProfileOptionsSave]
Fallback="ScreenProfileSave"
NextScreen="ScreenCaution"

[ScreenProfileSave]
PlayMusic=not GetExtraStage()
OutTransitionSeconds=1

[ScreenProfileSaveSummary]
OutTransitionSeconds=1
NextScreen="ScreenGameOver"

[ScreenDataSaveSummary]
CodeNames="Start"
CodeStart="Start"
Fallback="ScreenSplash"
OutTransitionSeconds=1
TimerSeconds=22
TimerOnCommand=visible,false

ShowHeader=true
ShowFooter=false

NextScreen="ScreenDataSaveSummaryEnd"
PrevScreen="ScreenDataSaveSummaryEnd"
StartScreen="ScreenDataSaveSummaryEnd"

[ScreenDataSaveSummaryEnd]
Class="ScreenProfileSave"
Fallback="ScreenProfileSaveSummary"
NextScreen="ScreenGameOver"
PrevScreen="ScreenGameOver"
OutTransitionSeconds=1
TimerSeconds=-1
PlayMusic=true

[ScreenProfileLoad]
Fallback="ScreenSelectProfile"
NextScreen="ScreenCaution"
OutTransitionSeconds=1

ShowHeader=false
ShowFooter=false
PlayMusic=true
CodeNames="Start"
CodeStart="Start"

[ScreenSelectStyle]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.FirstScreen()
OutTransitionSeconds=2

ShowFooter=true
ShowHelp=true
HelpY=SCREEN_BOTTOM-150

PrepareScreens="ScreenCaution"

ChoiceNames="Single,Versus,Double"
DefaultChoice="Single"

ChoiceSingle="name,Single;style,single;text,Single;playmode,regular;screen,"..Branch.AfterSelectStyle()
ChoiceVersus="name,Versus;style,versus;text,Versus;playmode,regular;screen,"..Branch.AfterSelectStyle()
ChoiceDouble="name,Double;style,double;text,Double;playmode,regular;screen,"..Branch.AfterSelectStyle()
TimerSeconds=20

ShowScroller=true
# Scroller should behave circularly - both selection and animation should
# wrap around.
WrapScroller=true
LoopScroller=true
WrapCursor=true
ShowIcon=true
UseIconMetrics=true

ScrollerX=_screen.cx
ScrollerY=_screen.cy-40
ScrollerOnCommand=fov,60;draworder,-1
ScrollerNumItemsToDraw=3

# NOTE: You have to set SecondsPerItem > 0 or it won't animate
ScrollerSecondsPerItem=0.25
ScrollerSubdivisions=5
# XXX FIXME This is nicked from futurex, and it's ugly and stuff
# Also get new graphics for Emi/Disco/Yuni/Rinon, with good edges,
# maybe original characters, and same perspective angle on the stage
# XXX Idea: maybe have single zoom to background and other two zoom to
# foreground when 2P joins, then switch between them?  More complicated though.
ScrollerTransform=function(self,ofs,i,n) \
	local t=ofs*math.pi*2/n; \
	if IsUsingWideScreen() then \
		self:x(math.sin(t)*720); \
	else \
		self:x(math.sin(t)*640); \
	end \
	self:y(math.cos(t)*150-150); \
	self:z((math.cos(t)*200-200)); \
end

IconChoiceSingleX=
IconChoiceSingleY=
IconChoiceSingleOnCommand=draworder,2
IconChoiceSingleOffCommand=

IconChoiceDoubleX=
IconChoiceDoubleY=
IconChoiceDoubleOnCommand=draworder,2
IconChoiceDoubleOffCommand=

IconChoiceVersusX=
IconChoiceVersusY=
IconChoiceVersusOnCommand=draworder,2
IconChoiceVersusOffCommand=

[ScreenSelectPlayMode]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
TimerSeconds=20
ShowStyleIcon=false
ShowHelp=false
ShowFooter=true

NumChoicesOnPage1=2

DefaultChoice="Music"
ChoiceNames="1,2"
Choice1="name,Music;screen,ScreenCaution"
Choice2="name,Oni;screen,ScreenSelectPlayCourseMode"

UpdateOnMesage=""

PerChoiceIconElement=false

ShowScroller=false
WrapScroller=true
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y
ScrollerOnCommand=SetFastCatchup,true;
ScrollerOffCommand=decelerate,0.8;y,SCREEN_CENTER_Y;sleep,2;linear,0.1;zoomy,0
#
ShowIcon=true
UseIconMetrics=true
#
IconGainFocusCommand=stoptweening;glowshift;decelerate,0.125;zoom,1;
IconLoseFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,0.6;
# IconMinZoom=0.5
# IconBaseZoom=0.6
#
#
IconChoiceMusicX=SCREEN_CENTER_X-140
IconChoiceMusicY=SCREEN_CENTER_Y
IconChoiceMusicOnCommand=zoom,0;sleep,0.1;bounceend,0.1175;zoom,1
IconChoiceMusicOffCommand=sleep,0.2;linear,0.10;addx,SCREEN_WIDTH
IconChoiceMusicGainFocusCommand=stoptweening;decelerate,0.125;zoom,1;x,SCREEN_CENTER_X-180;y,SCREEN_CENTER_Y-50;
IconChoiceMusicLoseFocusCommand=stoptweening;decelerate,0.125;zoom,0.7;x,SCREEN_CENTER_X-300;y,SCREEN_CENTER_Y-100;

IconChoiceOniX=SCREEN_CENTER_X+140
IconChoiceOniY=SCREEN_CENTER_Y
IconChoiceOniOnCommand=zoom,0;sleep,0.1;bounceend,0.1175;zoom,0.7
IconChoiceOniOffCommand=sleep,0.2;linear,0.10;addx,-SCREEN_WIDTH
IconChoiceOniGainFocusCommand=stoptweening;decelerate,0.125;zoom,1;x,SCREEN_CENTER_X+180;y,SCREEN_CENTER_Y-50;
IconChoiceOniLoseFocusCommand=stoptweening;decelerate,0.125;zoom,0.7;x,SCREEN_CENTER_X+300;y,SCREEN_CENTER_Y-100;

[ScreenSelectPlayCourseMode]
#PersistScreens="ScreenSelectPlayCourseMode,ScreenSelectCourse"
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
TimerSeconds=40
InTransitionSeconds=0.75
OutTransitionSeconds=2

ShowFooter=true
#
ScreenOutDelay=3
SharedSelection=true
#
DefaultChoice="Extended"
ChoiceNames="Extended,Oni"
ChoiceExtended="name,Extended;text,Extended;playmode,nonstop;screen,ScreenSelectCourse;setenv,sMode,Extended"
ChoiceOni="name,Oni;text,Oni;playmode,oni;screen,ScreenSelectCourse;setenv,sMode,Oni"
#
PerChoiceIconElement=false
#
ShowScroller=true
WrapScroller=true
ScrollerX=SCREEN_CENTER_X-60
ScrollerY=SCREEN_CENTER_Y-125
ScrollerOnCommand=SetFastCatchup,true;draworder,-1
ScrollerOffCommand=
ScrollerTransform=function(self,ofs,i,n) \
	self:valign(0.5); \
	self:y(ofs*250); \
end
#
ShowIcon=false
UseIconMetrics=false

[ScreenCaution]
Class="ScreenSplash"
Fallback="ScreenSplash"
NextScreen=Branch.SelectMusicOrCourse()
PrevScreen=Branch.TitleMenu()
AllowStartToSkip=true

ForceTimer=true
TimerStealth=true
TimerSeconds=3.5
TimerOnCommand=draworder,6;visible,false
InTransitionSeconds=0.4
OutTransitionSeconds=1

[ScreenSelectMusic]
Class="ScreenSelectMusic"
Fallback="ScreenWithMenuElements"
InTransitionSeconds=0.5
OutTransitionSeconds=1
PersistScreens="ScreenEvaluationNormal,ScreenProfileSave"
ShowHeader=false

WaitForChildrenBeforeTweeningOut=true

PrevScreen=Branch.TitleMenu()
TimerY=SCREEN_TOP+80
ShowHelp=true
TimerSeconds=90

SampleMusicPreviewMode='SampleMusicPreviewMode_Normal'
SampleMusicLoops=true
SampleMusicFallbackFadeInSeconds=0
SampleMusicFadeOutSeconds=1.5
PlayChartPreviewMusic=true

UsePlayerSelectMenu=SMUsePO()
SelectMenuAvailable=true
UseOptionsList=SMUseOL()
OptionsListTimeout=0.1
OptionsListP1OnCommand=xy,IsUsingWideScreen() and _screen.cx-566 or _screen.cx-360,_screen.cy-100
OptionsListP2OnCommand=xy,IsUsingWideScreen() and _screen.cx+566 or _screen.cx+360,_screen.cy-160

SelectMenuScreenName="ScreenPlayerOptionsPopup"
TwoPartSelection=ThemePrefs.Get("ShowDiffSelect")

PreviousDifficultyButton="MenuLeft"
NextDifficultyButton="MenuRight"
WrapChangeSteps=false

MusicWheelType="MusicWheel"..ThemePrefs.Get("WheelType")

#DO NOT USE THESE! Since there's multiple wheel options and for the sake of organization and as a small optimization,
#these metrics are instead handled in:
#BGAnimations/ScreenSelectMusic overlay/<WheelType>/default.lua
MusicWheelY=
MusicWheelX=
MusicWheelOnCommand=
MusicWheelOffCommand=
MusicWheelStartSelectingStepsMessageCommand=
MusicWheelSongUnchosenMessageCommand=bouncebegin,0.15;zoomx,1;diffusealpha,1

#
ShowStageDisplay=true
#Like the above, the xy values are set in InitCommands per wheel type.
StageDisplayX=
StageDisplayY=
StageDisplayOnCommand=diffusealpha,0;sleep,0.25;linear,0.05;diffusealpha,0.5;linear,0.05;diffusealpha,0;linear,0.05;diffusealpha,1;linear,0.05;diffusealpha,0;linear,0.05;diffusealpha,0.5;decelerate,0.1;diffusealpha,1
StageDisplayOffCommand=linear,0.05;diffusealpha,0
StageDisplayUseShortString=false

# This isn't even used.
ShowBannerFrame=true
BannerFrameX=
BannerFrameY=
BannerFrameOnCommand=
BannerFrameOffCommand=
BannerOnCommand=visible,false
#
ShowBPMDisplay=true
BPMDisplayX=SCREEN_CENTER_X
BPMDisplayY=SCREEN_CENTER_Y+120
BPMDisplayOnCommand=zoom,0.9;cropright,0.5;cropleft,0.5;sleep,0.3;decelerate,0.2;cropright,0;cropleft,0
BPMDisplayOffCommand=decelerate,0.3;cropright,0.5;cropleft,0.5;

#Whole buncha codes for the PaneDisplays.
#CodeNames="OpenPanes1,PaneLeft,PaneRight,ClosePanes,SortList1,SortList2,OpenOpList,OpenOpListButton"
CodeNames="OpenPanes1,PaneLeft,PaneRight,ClosePanes,SortList1,SortList2,OpenOpList"
CodeOpenOpListButton="Select"
CodeOpenOpList="Up,Down,Up,Down,Up,Down"
CodeOpenPanes1="@Left-Up"
CodeOpenPanesEFUp="EffectUp"
CodePaneLeft="Left"
CodePaneRight="Right"
CodeClosePanes="@Right-Down"
CodeSortList1="MenuLeft-MenuRight"
CodeSortList2="@Up-Down"


MusicWheelCodeMessageCommand=%function(self, params) \
	if not GAMESTATE:IsCourseMode() and (params.Name=="SortList1" or params.Name=="SortList2") then \
		if getenv("DList") == 0 then \
			SCREENMAN:AddNewScreenToTop("ScreenSortList"); \
			setenv("SortList",1); \
		end \
	end; \
end;
MusicWheelSortMessageCommand=%function(self, params) \
	self:ChangeSort('SortOrder_'..params.order) \
end;

[ScreenSelectMusicExtra]
Fallback="ScreenSelectMusic"

[ScreenSortList]
ShowHeader=false
Fallback="ScreenWithMenuElements"
NextScreen="ScreenSelectMusic"
PrevScreen="ScreenSelectMusic"
ShowCreditDisplay=false
PlayMusic=false
StopMusicOnBack=false

[ScreenSelectCourse]
ShowHeader=false
ShowFooter=false
ShowBannerFrame=false
MusicWheelType="CourseWheel"
MusicWheelX=SCREEN_CENTER_X+150
MusicWheelY=SCREEN_CENTER_Y

TwoPartSelection=false

ShowCourseContentsList=true
CourseContentsListX=
CourseContentsListY=
CourseContentsListOnCommand=
CourseContentsListOffCommand=
#

CodeNames="Back"
CodeBack="Back"

[ScreenSelectDifficulty]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen="ScreenSelectMusic"
ShowHeader=MusHeader()
ChoiceNames="1"
Choice1=
DefaultChoice=
PlayMusic=false
StopMusicOnBack=false

[GrooveRadar]
# Uncomment these to reduce the size of the Radar polygon
#RadarValueMapP1OnCommand=zoom,0.9;diffusecolor,GameColor.PlayerColors.PLAYER_1
#RadarValueMapP2OnCommand=zoom,0.9;diffusecolor,GameColor.PlayerColors.PLAYER_2

# Stream
Label1X=4
Label1Y=-77
# Voltage
Label2X=-97
Label2Y=-37
# Air
Label3X=-25
Label3Y=67
# Freeze
Label4X=79
Label4Y=67
# Chaos
Label5X=99
Label5Y=-37

RadarValueMapP1OnCommand=
RadarValueMapP2OnCommand=

[MusicWheel]
SwitchSeconds=0.15
# This function is applied to each MusicWheelItem repeatedly as it scrolls
# around the wheel.  "ofs" is the distance from center, in fractional number
# of items.
# XXX Draw more items for wide screens, rather than spreading out.
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:x( offsetFromCenter*280 ); \
end;

ScrollBarHeight=ScrollBarH()
ScrollBarOnCommand=%ScrollBarOn

MusicWheelSortOnCommand=fov,80;vanishpoint,SCREEN_CENTER_X;
MusicWheelSortOffCommand=fov,80;
MusicWheelItemSortOnCommand=zoom,0;decelerate,0.2;zoom,1
MusicWheelItemSortOffCommand=accelerate,0.2;zoom,0

NumWheelItems=7
ShowRandom=true
ShowRoulette=false
SortOrders={ "SortOrder_Group", "SortOrder_Title", "SortOrder_BPM", "SortOrder_EasyMeter", "SortOrder_TopGrades", "SortOrder_Popularity", }
ModeMenuChoiceNames="Group,Title,Bpm,BeginnerMeter,EasyMeter,MediumMeter,HardMeter,ChallengeMeter,TopGrades,Popularity,Genre,Length"

ChoicePreferred="sort,Preferred"
ChoiceGroup="sort,Group"
ChoiceTitle="sort,Title"
ChoiceBpm="sort,BPM"
ChoicePopularity="sort,Popularity"
ChoiceTopGrades="sort,TopGrades"
ChoiceArtist="sort,Artist"
ChoiceGenre="sort,Genre"
ChoiceBeginnerMeter="sort,BeginnerMeter"
ChoiceEasyMeter="sort,EasyMeter"
ChoiceMediumMeter="sort,MediumMeter"
ChoiceHardMeter="sort,HardMeter"
ChoiceChallengeMeter="sort,ChallengeMeter"
ChoiceDoubleEasyMeter="sort,DoubleEasyMeter"
ChoiceDoubleMediumMeter="sort,DoubleMediumMeter"
ChoiceDoubleHardMeter="sort,DoubleHardMeter"
ChoiceDoubleChallengeMeter="sort,DoubleChallengeMeter"
ChoiceLength="sort,Length"
ChoiceRecent="sort,Recent"
ChoiceNormalMode="playmode,regular"
ChoiceBattleMode="playmode,battle"

CustomWheelItemNames=CourseItem()

CustomWheelItemCrs="screen,ScreenSelectPlayCourseMode";
CrsColor="#FFFFFF"

[MusicWheelDefault]
Fallback="MusicWheel"

[CourseWheel]
Fallback="MusicWheel"

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:z(1-math.abs(offsetFromCenter)); \
	self:x((offsetFromCenter*60)); \
	self:y( offsetFromCenter*200 ); \
end

NumWheelItems=18

ScrollBarOnCommand=visible,false

[MusicWheelCoverFlow]
Fallback="MusicWheel"

# 3d music wheel
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local function GetZoom(offsetFromCenter) \
		if math.abs(offsetFromCenter) >= 1 then \
			return 0.625; \
		else \
			return (10.0-math.abs(offsetFromCenter)*3.75)/10; \
		end; \
	end; \
	local function GetDistence(offsetFromCenter) \
		if offsetFromCenter >= 1 then \
			return offsetFromCenter*160+80; \
		elseif offsetFromCenter <= -1 then \
			return offsetFromCenter*160-80; \
		else \
			return 160*offsetFromCenter + 80*offsetFromCenter \
		end; \
	end; \
	local function GetRotationY(offsetFromCenter) \
		if offsetFromCenter > 0.9 then \
			return 45+(offsetFromCenter-0.9); \
		elseif offsetFromCenter < -0.9 then \
			return -45+(offsetFromCenter+0.9); \
		else \
			return offsetFromCenter*45/0.9; \
		end; \
	end; \
	self:linear(5.8); \
	self:x( GetDistence(offsetFromCenter) ); \
	self:z(1-math.abs(offsetFromCenter)); \
	self:draworder( math.abs(offsetFromCenter)*10 ); \
	self:zoom( GetZoom(offsetFromCenter) ); \
	self:rotationx(0); \
	self:rotationy( GetRotationY(offsetFromCenter) ); \
	self:rotationz(0); \
	end;

NumWheelItems=13
ScrollBarOnCommand=diffusealpha,0

[MusicWheelWheel]
Fallback="MusicWheel"

ShowRandom=true
ShowRoulette=true
ShowPortal=false
SwitchSeconds=0.1

LockedInitialVelocity=9

NumWheelItems=15
ItemCurveX=72
ItemSpacingY=100
Wheel3DRadius=495
CirclePercent=1.125
CenterPaddingY = 11.25
ItemTransformFunction=curved_wheel_transform
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local numItems = THEME:GetMetric("MusicWheelWheel","NumWheelItems") \
	local curve3D = THEME:GetMetric("MusicWheelWheel", "CirclePercent")*4*math.pi \
	local fRotX = scale(offsetFromCenter, -numItems/2,numItems/2, -curve3D/2,curve3D/2) \
	local radius = THEME:GetMetric("MusicWheelWheel","Wheel3DRadius") \
	local curveX = THEME:GetMetric("MusicWheelWheel","ItemCurveX") \
	local spacingY = THEME:GetMetric("MusicWheelWheel","ItemSpacingY") \
	self:x( (1-math.cos(offsetFromCenter/math.pi))*72 ); \
	self:y( (offsetFromCenter*scale(math.abs(offsetFromCenter), 0,numItems/2, spacingY,spacingY*math.sin(0.8))) ); \
	self:z( -10*math.abs(offsetFromCenter*2.5) ); \
	self:rotationx((offsetFromCenter*14) * math.sin(180/math.pi)) \
	if offsetFromCenter < -0.5 then \
		self:addx(0) \
		self:addy(-20) \
	elseif offsetFromCenter > 0.5 then \
		self:addx(0) \
		self:addy(20) \
	elseif offsetFromCenter >= -0.5 and offsetFromCenter <= 0.5 then \
		self:linear(0.2) \
		self:addx( 40 ); \
		self:addy( offsetFromCenter*20 ) \
	end \
end

[MusicWheelBanner]
Fallback="MusicWheel"

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:x(offsetFromCenter*190); \
end
NumWheelItems=15

[MusicWheelJukebox]
Fallback="MusicWheel"

ShowRandom=false
ShowRoulette=false
ShowPortal=false
SwitchSeconds=0.25

RouletteColor=color("#FFFFFF")
RandomColor=color("#FFFFFF")

LockedInitialVelocity=9

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:x(math.sin(offsetFromCenter*(math.pi/8))*540 ); \
	self:y(math.cos(offsetFromCenter*(math.pi/8))*540); \
	self:z(1-math.abs(offsetFromCenter)); \
	if offsetFromCenter < -0.5 then \
		self:addx(-100) \
		self:addy(-100) \
		self:diffusealpha(1) \
	elseif offsetFromCenter > 0.5 then \
		self:addx(100) \
		self:addy(-100) \
		self:diffusealpha(1) \
	elseif offsetFromCenter >= -0.5 and offsetFromCenter <= 0.5 then \
		self:linear(0.2) \
		self:addx( offsetFromCenter*100 ); \
		self:addy(0) \
		self:diffusealpha(0) \
	end \
end
NumWheelItems=17

[MusicWheelA]
ShowRoulette=false
ShowRandom=false
Fallback="MusicWheel"
SwitchSeconds=0.1
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:z(1-math.abs(offsetFromCenter)); \
	self:x((offsetFromCenter*30)); \
	self:y( offsetFromCenter*80 ); \
end

MusicWheelSortOnCommand=
MusicWheelSortOffCommand=
MusicWheelItemSortOnCommand=zoom,0;decelerate,0.2;zoom,1
MusicWheelItemSortOffCommand=accelerate,0.2;zoom,0

NumWheelItems=AWheelItems()

CustomWheelItemNames=CourseItem()

CustomWheelItemCrs="screen,ScreenSelectPlayCourseMode";
CrsColor="#FFFFFF"

[MusicWheelSolo]
Fallback="MusicWheel"
ShowRoulette=false
ShowRandom=false
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( offsetFromCenter*165 ); \
end

HideActiveSectionTitle=false
OnlyShowActiveSection=true
NumWheelItems=10

[MusicWheelReboot]
Fallback="MusicWheel"
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( offsetFromCenter*100 ); \
	if offsetFromCenter >= -0.5 and offsetFromCenter <= 0.5 then \
		self:linear(0.2) \
		self:addx(offsetFromCenter*100); \
	else \
		self:linear(0.2) \
		self:addx(100) \
	end \
end

HideActiveSectionTitle=false
OnlyShowActiveSection=true
NumWheelItems=11

[MusicWheelPreview]
Fallback="MusicWheel"
ItemTransformFunction=PreviewWheel

HideActiveSectionTitle=false
OnlyShowActiveSection=true
ShowRandom=false
NumWheelItems=5

[MusicWheelItem]
WheelNotifyIconX=-95
WheelNotifyIconY=-95
WheelNotifyIconOnCommand=shadowlength,2;
#
SongNameX=
SongNameY=143
SongNameOnCommand=visible,false
#
CourseX=
CourseY=9999
CourseOnCommand=visible,false
#
SectionExpandedX=
SectionExpandedY=143
SectionExpandedOnCommand=zoom,0;maxwidth,220;horizalign,center;strokecolor,Color("Outline");draworder,1
#
SectionCollapsedX=
SectionCollapsedY=143
SectionCollapsedOnCommand=zoom,0;maxwidth,220;horizalign,center;strokecolor,Color("Outline");draworder,1
#
#�C��?EƧ����h�ֺq��
SectionCountX=
SectionCountY=-143
SectionCountOnCommand=zoom,0;strokecolor,Color("Outline")
#
RouletteX=-30
RouletteY=-900
RouletteOnCommand=zoom,0
#
RandomX=
RandomY=143
RandomOnCommand=zoom,0
#
SortX=0
SortY=143
SortOnCommand=maxwidth,360;zoom,0;shadowlength,1;shadowcolor,color("0,0,0,0.325")
#
ModeX=0
ModeY=0
ModeOnCommand=maxwidth,360;zoom,0;strokecolor,Color("Outline")
#
GradeP1X=-82
GradeP1Y=-100
GradeP2X=82
GradeP2Y=-100

[TextBanner]
TitleOnCommand=visible,false
SubtitleOnCommand=visible,false
ArtistOnCommand=visible,false
ArtistPrependString=""

[TextBannerCourse]
Fallback="TextBanner"
TitleOnCommand=visible,false
SubtitleOnCommand=visible,false
ArtistOnCommand=visible,false

ArtistPrependString=""

[TextBannerGameplay]
TitleOnCommand=
SubtitleOnCommand=
ArtistOnCommand=
ArtistPrependString=""
AfterSetCommand=%TextBannerGameplayAfterSet

[BPMDisplay]
NoBpmText="000"
ShowQMarksInRandomCycle = false

Cycle=1
SetNoBpmCommand=diffuse,Color.White
SetNormalCommand=diffuse,Color.White
SetChangeCommand=diffuse,Color.White
SetRandomCommand=diffuse,Color.White
SetExtraCommand=diffuse,Color.White

[Background]
ShowDancingCharacters=false

[StreamDisplay]
AlwaysBounceNormalBar=false
TextureCoordScaleX=0
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local spacing_x=19.8; \
	self:zoomtoheight(18); \
	self:x((itemIndex-(numItems/2))*spacing_x); \
	self:zoomtowidth(42); \
	self:skewy(-0.03); \
	self:rotationz(-90); \
	self:MaskSource(); \
end

VelocityMultiplier=4
VelocityMin=-.06
VelocityMax=.04
SpringMultiplier=2.0
ViscosityMultiplier=0.2

NumPills=32

[NoteField]
#For screen filter
ShowBoard = false
ShowBeatBars=false

BarMeasureAlpha=1
Bar4thAlpha=0.25
Bar8thAlpha=0
Bar16thAlpha=0

[Gameplay]
UseInternalJudgment=false
UseInternalScoring = false
ComboIsPerRow = ThemePrefs.Get("ComboPerRow")
MissComboIsPerRow = true
MinScoreToContinueCombo='TapNoteScore_W4'
MinScoreToMaintainCombo='TapNoteScore_W4'
ToastyMinTNS='TapNoteScore_W4'

[LifeMeterBar]
#InitialValue=LifeInitialValue()
InitialValue=0.5
OverOnCommand=
ForceLifeDifficultyOnExtraStage=true
MinScoreToKeepLife='TapNoteScore_W4'
LifePercentChangeW5=THEME:GetMetric("LifeMeterBar","LifePercentChangeW4")
DangerThreshold=0.35
LifePercentChangeW1=0.004
LifePercentChangeW2=0.004
LifePercentChangeW3=0.002
LifePercentChangeW4=0
LifePercentChangeMiss=-0.024
LifePercentChangeHitMine=-0.024
LifePercentChangeLetGo=-0.024
LifePercentChangeMissedHold=-0.024
LifePercentChangeCheckpointMiss=-0.024

[LifeMeterBattery Percent]
#this shouldn't show up. make it not show up. -tertu
PercentP1OnCommand=visible,false
PercentP2OnCommand=visible,false
DancePointsP1OnCommand=visible,false
DancePointsP2OnCommand=visible,false

[LifeMeterBattery]
MinScoreToKeepLife='TapNoteScore_W4'
MaxLives=4
DangerThreshold=1

BatteryP1X=0
BatteryP1Y=0
BatteryP2X=0
BatteryP2Y=0

NumLivesFormat=
NumLivesP1X=0
NumLivesP1Y=0
NumLivesP1GainLifeCommand=visible,false
NumLivesP1LoseLifeCommand=visible,false
NumLivesP2X=92
NumLivesP2Y=0
NumLivesP2GainLifeCommand=visible,false
NumLivesP2LoseLifeCommand=visible,false

[Player]
PercentUntilColorCombo=0
ComboUnderField=ComboUnderField()
TapJudgmentsUnderField=JudgeUnderField()
HoldJudgmentsUnderField=JudgeUnderField()

# ????????Y????Scripts/02 Other.lua???
JudgmentTransformCommand=%JudgmentTransformCommand

# ????Y??Scripts/02 Other.lua???
ComboTransformCommand=%ComboTransformCommand

ReceptorArrowsYStandard=-161
ReceptorArrowsYReverse=152

HoldJudgmentYStandard=-112
HoldJudgmentYReverse=112

AttackDisplayY=-70
AttackDisplayYReverse=70

[Judgment]
JudgmentW1Command=glowblink;effectperiod,0.025;effectcolor1,color("1,1,1,0");effectcolor2,color("1,1,1,0.4");diffusealpha,1;zoom,0.65;linear,0.066;zoom,0.6;sleep,0.434;diffusealpha,0
JudgmentW2Command=stopeffect;diffusealpha,1;zoom,0.65;linear,0.066;zoom,0.6;sleep,0.434;diffusealpha,0
JudgmentW3Command=stopeffect;diffusealpha,1;zoom,0.65;linear,0.066;zoom,0.6;sleep,0.434;diffusealpha,0
JudgmentW4Command=stopeffect;zoom,0.6;diffusealpha,1;sleep,0.5;diffusealpha,0
JudgmentW5Command=stopeffect;zoom,0.6;diffusealpha,1;sleep,0.5;diffusealpha,0
JudgmentMissCommand=stopeffect;zoom,0.6;diffusealpha,1;sleep,0.5;diffusealpha,0
# Late/Early
OffsetOnCommand=
OffsetLateCommand=
OffsetEarlyCommand=

JudgmentBiasOnCommand=shadowlength,0;zoom,0.3
JudgmentBiasCommand=diffusealpha,1;zoom,0.35;linear,0.066;zoom,0.3;sleep,0.434;diffusealpha,0

[HoldJudgment]
HoldJudgmentLetGoCommand=finishtweening;visible,true;shadowlength,0;diffusealpha,1;zoom,0.4;zoomx,0.5;sleep,1.3;diffusealpha,0
HoldJudgmentHeldCommand=finishtweening;visible,true;shadowlength,0;diffusealpha,1;zoom,0.4;sleep,0.8;diffusealpha,0


# todo: fix this
[Combo]
ShowComboAt=4

NumberOnCommand=horizalign,right;vertalign,bottom;addx,15;maxwidth,250
LabelOnCommand=horizalign,left;vertalign,bottom;addx,15;addy,2;zoom,0.75
#

PulseCommand=%function(self,param) self:stoptweening(); self:zoom(1.33*param.Zoom); self:linear(0.05); self:zoom(param.Zoom); end
PulseLabelCommand=%function(self,param) self:stoptweening(); self:zoom(1.33*param.LabelZoom); self:linear(0.05); self:zoom(param.LabelZoom); end

NumberMinZoom=0.4
NumberMaxZoom=0.6
NumberMaxZoomAt=100
#
LabelMinZoom=0.4
LabelMaxZoom=0.4

[StepsDisplayGameplay]
ShowFrame=false
FrameX=
FrameOnCommand=draworder,-1
FrameSetCommand=
#
ShowTicks=false

ShowMeter=false
#
ShowDescription=false
DescriptionX=0
DescriptionY=0
DescriptionOnCommand=uppercase,true;halign,0
DescriptionOffCommand=
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
	end; \
end;
#
ShowAutogen=false
#
ShowStepsType=GetUserPrefB("UserPrefAutoSetStyle")
StepsTypeX=-20
StepsTypeY=7
StepsTypeOnCommand=zoom,1

[RollingNumbers]
TextFormat="%07.0f"
ApproachSeconds=0.2
Commify=true
LeadingZeroMultiplyColor=color("#777777FF")

[RollingNumbersEvaluation]
ApproachSeconds=2.6

[RollingNumbersSongData]
TextFormat="%07.0f"
ApproachSeconds=0.001
Commify=true
LeadingZeroMultiplyColor=color("#777777FF")

[RollingNumbersScore]
Fallback="RollingNumbers"
ApproachSeconds=0.00001
LeadingZeroMultiplyColor=color("#a2a2a2")

[RollingNumbersEXScore]
Fallback="RollingNumbers"
TextFormat="%.0f"
Commify=false

[RollingNumbersJudgment]
TextFormat="%04.0f"
ApproachSeconds=0.3
Commify=false
LeadingZeroMultiplyColor=color("#FFFFFF")

[RollingNumbersDan]
TextFormat="%02.0f"
ApproachSeconds=60
Commify=false
LeadingZeroMultiplyColor=color("#FFFFFF")

[ScreenGameplay]
InTransitionSeconds=BeginReadyDelay()
OutTransitionSeconds=4
CancelTransitionSeconds=0.2
#NextCourseSongDelay=NextCourseSongDelay()
NextCourseSongDelay=5

UsePauseMenu=ThemePrefs.Get("PauseMenu")
UnpauseWithStart=false

ShowScoreInRave=false
CodeNames="SpeedUp,SpeedUp2,SpeedDown,SpeedDown2,AppearancePlusHarsher,AppearancePlusEasier,AppearancePlusHarsher2,AppearancePlusEasier2,AppearancePlusHarsher3,AppearancePlusEasier3,AppearancePlusShow"
CodeSpeedUp="MenuRight"
CodeSpeedDown="MenuLeft"
CodeSpeedUp2="@Select-Right"
CodeSpeedDown2="@Select-Left"
CodeAppearancePlusHarsher="MenuUp"
CodeAppearancePlusHarsher2="@Select-Up"
CodeAppearancePlusHarsher3="EffectUp"
CodeAppearancePlusEasier="MenuDown"
CodeAppearancePlusEasier2="@Select-Down"
CodeAppearancePlusEasier3="EffectDown"
CodeAppearancePlusShow="Start"


# what the hell is the point of this metric anyways
StopCourseEarly=false

# minimum is 3 measures for non-zero song offset songs when firstBeat < 3 measures
# otherwise, the minimum is 0, so that music starts after MinSecondsToMusic.
MinSecondsToStep=MinSecondsToStep()
MinSecondsToStepNextSong=MinSecondsToStep()

# music starts at measure 1 regardless of song offset
MinSecondsToMusic=GetSongStartDelay()

# used exclusively in ScreenGameplay::GetMusicEndTiming
OutTransitionLength=5
# how long the course "next song" transition takes.
CourseTransitionLength=20

# unsure.
MusicFadeOutSeconds=0.5
BeginFailedDelay=3.0
StartGivesUp=true
ShowCreditDisplay=true

PlayerInitCommand=y,SCREEN_CENTER_Y;zoom,(THEME:GetMetric("Common","ScreenHeight")/480);draworder,-1
PlayerP1OnCommand=
PlayerP1OffCommand=
PlayerP2OnCommand=
PlayerP2OffCommand=

PlayerP1OnePlayerOneSideX=ScreenGameplay_X(PLAYER_1)
PlayerP2OnePlayerOneSideX=ScreenGameplay_X(PLAYER_2)
PlayerP1TwoPlayersTwoSidesX=ScreenGameplay_X(PLAYER_1)
PlayerP2TwoPlayersTwoSidesX=ScreenGameplay_X(PLAYER_2)
PlayerP1TwoPlayersOneSideX=ScreenGameplay_X(PLAYER_1)
PlayerP2TwoPlayersOneSideX=ScreenGameplay_X(PLAYER_2)
PlayerP1OnePlayerTwoSidesX=ScreenGameplay_X(PLAYER_1)
PlayerP2OnePlayerTwoSidesX=ScreenGameplay_X(PLAYER_2)
PlayerP1TwoPlayersSharedSidesX=ScreenGameplay_X(PLAYER_1)
PlayerP2TwoPlayersSharedSidesX=ScreenGameplay_X(PLAYER_2)

ShowLifeMeterForDisabledPlayers=false

#--#
#LifeP1X=IsUsingWideScreen() and THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")+5 or THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")-22

LifeP1X=IsUsingWideScreen() and _screen.cx-530 or _screen.cx-422
LifeP1Y=SCREEN_TOP+69
LifeP1OnCommand=draworder,-1;zoom,IsUsingWideScreen() and 1 or 0.8
LifeP1OffCommand=
LifeP2X=IsUsingWideScreen() and _screen.cx+530 or _screen.cx+422
LifeP2Y=SCREEN_TOP+69
LifeP2OnCommand=draworder,-1;rotationy,180;zoom,IsUsingWideScreen() and 1 or 0.8
LifeP2OffCommand=

CombinedLifeX=SCREEN_CENTER_X
CombinedLifeY=SCREEN_TOP+24
CombinedLifeOnCommand=
CombinedLifeOffCommand=

ToastyDisplayP1X=
ToastyDisplayP1Y=
ToastyDisplayP1OnCommand=
ToastyDisplayP1OffCommand=
#
ToastyDisplayP2X=
ToastyDisplayP2Y=
ToastyDisplayP2OnCommand=
ToastyDisplayP2OffCommand=

StageDisplayUseShortString=true

PlayerOptionsP1X=SCREEN_CENTER_X-80
PlayerOptionsP1Y=SCREEN_BOTTOM-34
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP1OffCommand=
PlayerOptionsP2X=SCREEN_CENTER_X-80
PlayerOptionsP2Y=SCREEN_BOTTOM-34
PlayerOptionsP2OnCommand=visible,false
PlayerOptionsP2OffCommand=
StopWords="1X,default,Overhead,Off"

#--#
ScoreP1OnCommand=diffusealpha,0
ScoreP2OnCommand=diffusealpha,0
#--#
#used by Graphics/ScreenGameplay ScoreFrame/score_counter.lua
ScoreCustomP1X=SCREEN_LEFT+280
ScoreCustomP1Y=SCREEN_BOTTOM-62
ScoreCustomP1OnCommand=zoomx,1.4;zoomy,1.1
ScoreCustomP1OffCommand=
ScoreCustomP2X=SCREEN_RIGHT-260
ScoreCustomP2Y=SCREEN_BOTTOM-62
ScoreCustomP2OnCommand=zoomx,1.4;zoomy,1.1
ScoreCustomP2OffCommand=
#--#

LyricDisplaySetNoReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+320
LyricDisplaySetReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y-120
LyricDisplayDefaultColor=color("0,1,0,1");

ActiveAttackListP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP1Y=
ActiveAttackListP1OnCommand=visible,false
ActiveAttackListP1OffCommand=
ActiveAttackListP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP2Y=
ActiveAttackListP2OnCommand=visible,false
ActiveAttackListP2OffCommand=

SecondaryScoreP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
SecondaryScoreP1Y=SCREEN_CENTER_Y
SecondaryScoreP1OnCommand=zoom,1;diffuse,color("#F9FF20");
SecondaryScoreP1OffCommand=
SecondaryScoreP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")
SecondaryScoreP2Y=SCREEN_CENTER_Y
SecondaryScoreP2OnCommand=zoom,1;diffuse,color("#F9FF20");
SecondaryScoreP2OffCommand=

[ScreenEvaluationNormal]
Fallback="ScreenEvaluation"
OutTransitionSeconds=(GetExtraStage() or GAMESTATE:IsCourseMode()) and 2 or 1
PersistScreens="ScreenGameplay,ScreenStageInformation,ScreenSelectMusic"
ShowStageDisplay=not GAMESTATE:IsCourseMode()

[ScreenEvaluation]
Class="ScreenEvaluation"
Fallback="ScreenWithMenuElements"
PlayMusic=not GetExtraStage()
ShowHelp=true
#
StageDisplayNumberOffset=0
#
NextScreen=Branch.AfterEvaluation()
PrevScreen=Branch.AfterEvaluation()
ShowHeader=true
#
ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_TOP+104
StageDisplayOnCommand=draworder,1000;diffusealpha,0;sleep,0.25;linear,0.05;diffusealpha,0.5;linear,0.05;diffusealpha,0;linear,0.05;diffusealpha,1;linear,0.05;diffusealpha,0;linear,0.05;diffusealpha,0.5;decelerate,0.1;diffusealpha,1
StageDisplayOffCommand=linear,0.05;diffusealpha,0
StageDisplayUseShortString=false

ShowJudgmentLineW1=false
ShowJudgmentLineW2=false
ShowJudgmentLineW3=false
ShowJudgmentLineW4=false
ShowJudgmentLineW5=false
ShowJudgmentLineHeld=false
ShowJudgmentLineMiss=false
ShowJudgmentLineMaxCombo=false
ShowGradeArea=false
ShowScoreArea=false
ShowPointsArea=false
ShowSharedJudgmentLineLabels=false
ShowGraphDisplay=false
ShowComboGraph=false
ShowStepsDisplay=true
ShowPeakComboAward=false
ShowBonusArea=false

GradeP1X=IsUsingWideScreen() and _screen.cx-500 or _screen.cx-400
GradeP1Y=SCREEN_CENTER_Y-155
GradeP1OnCommand=zoom,0;sleep,0.3;bounceend,0.2;zoom,0.6
GradeP1OffCommand=linear,0.1;zoom,0
GradeP2X=IsUsingWideScreen() and _screen.cx+500 or _screen.cx+400
GradeP2Y=SCREEN_CENTER_Y-155
GradeP2OnCommand=zoom,0;sleep,0.3;bounceend,0.2;zoom,0.6
GradeP2OffCommand=linear,0.1;zoom,0
#
RingP1X=IsUsingWideScreen() and _screen.cx-360 or _screen.cx-260
RingP1Y=SCREEN_CENTER_Y-120
RingP2X=IsUsingWideScreen() and _screen.cx+640 or _screen.cx+500
RingP2Y=SCREEN_CENTER_Y-120
#
MachineRecordP1X=SCREEN_CENTER_X-350+50+5
MachineRecordP1Y=SCREEN_CENTER_Y-85
MachineRecordP1OnCommand=zoomy,0;zoomx,0.7;sleep,2.3;linear,0.1;zoomy,0.7
MachineRecordP1OffCommand=decelerate,0.05;zoomy,0
#
MachineRecordP2X=SCREEN_CENTER_X+350+70+5-30
MachineRecordP2Y=SCREEN_CENTER_Y-85
MachineRecordP2OnCommand=zoomy,0;zoomx,0.7;sleep,2.3;linear,0.1;zoomy,0.7
MachineRecordP2OffCommand=decelerate,0.05;zoomy,0
#
PersonalRecordP1X=SCREEN_CENTER_X-220
PersonalRecordP1Y=SCREEN_CENTER_Y-70
PersonalRecordP1OnCommand=zoomy,0;sleep,0.7;decelerate,0.15;zoomy,0.5;visible,false
PersonalRecordP1OffCommand=decelerate,0.05;zoomy,0
#
PersonalRecordP2X=SCREEN_CENTER_X+220
PersonalRecordP2Y=SCREEN_CENTER_Y-70
PersonalRecordP2OnCommand=zoomy,0;sleep,0.7;decelerate,0.15;zoomy,0.5;visible,false
PersonalRecordP2OffCommand=decelerate,0.05;zoomy,0

CodeNames="Left,Right"
CodeLeft="MenuLeft"
CodeRight="MenuRight"

[ScreenEvaluationSummary]
Fallback="ScreenEvaluation"
NextScreen="ScreenDataSaveSummary"
OutTransitionSeconds=1

ShowHeader=true

PlayMusic=true

Summary=true
ShowStyleIcon=true
ShowStageDisplay=false
ShowDifficultyIcon=false
ShowTryExtraStage=false

ShowScoreArea=false
#--#
ScoreNumberP1X=SCREEN_LEFT+100
ScoreNumberP1Y=SCREEN_CENTER_Y+155
ScoreNumberP1OnCommand=draworder,88;diffuse,color("#F9FF20");draworder,9;addx,-246;sleep,0.2;linear,0.2;addx,246
ScoreNumberP1OffCommand=linear,0.2;addx,-246
ScoreNumberP2X=SCREEN_RIGHT-100
ScoreNumberP2Y=SCREEN_CENTER_Y+155
ScoreNumberP2OnCommand=draworder,88;diffuse,color("#F9FF20");draworder,9;addx,246;sleep,0.2;linear,0.2;addx,-246
ScoreNumberP2OffCommand=linear,0.2;addx,246

#--Banner--#

SmallBanner1X=SCREEN_CENTER_X-60
SmallBanner1Y=SCREEN_CENTER_Y-155
SmallBanner1OnCommand=visible,false;draworder,100;zoom,0.5;
SmallBanner1OffCommand=visible,false
#--#
SmallBanner2X=SCREEN_CENTER_X-30
SmallBanner2Y=SCREEN_CENTER_Y-145
SmallBanner2OnCommand=visible,false;draworder,80;zoom,0.5;
SmallBanner2OffCommand=visible,false
#--#
SmallBanner3X=SCREEN_CENTER_X
SmallBanner3Y=SCREEN_CENTER_Y-135
SmallBanner3OnCommand=visible,false;draworder,60;zoom,0.5;
SmallBanner3OffCommand=visible,false
#--#
SmallBanner4X=SCREEN_CENTER_X+30
SmallBanner4Y=SCREEN_CENTER_Y-125
SmallBanner4OnCommand=visible,false;draworder,40;zoom,0.5;
SmallBanner4OffCommand=visible,false
#--#
SmallBanner5X=SCREEN_CENTER_X+60
SmallBanner5Y=SCREEN_CENTER_Y-115
SmallBanner5OnCommand=visible,false;draworder,20;zoom,0.5;
SmallBanner5OffCommand=visible,false
#--#

[ScreenOptionsManageProfiles]
Fallback="ScreenOptionsService"

[ScreenTextEntry]
ShowHeader=false

[ScreenCredits]

[ScreenCreditsXX]
Fallback="ScreenCredits"
TimerSeconds=126
NextScreen="ScreenGameOver"
PlayMusic=true
StopMusicOnBack=true
ShowCreditDisplay=false

[ScreenGameplayCredits]
Fallback="ScreenGameplay"
NextScreen="ScreenGameOver"
PrevScreen="ScreenTitleMenu"

[ScreenGameplayHowTo]
Fallback="ScreenGameplay"
NextScreen="ScreenSelectMusic"
PrevScreen=Branch.TitleMenu()
StartGivesUp=false
ShowHelp=true
HelpY=SCREEN_TOP+80
HelpOnCommand=draworder,10;diffusealpha,0;sleep,2;diffusealpha,1;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("1,1,1,0.5");effectperiod,1

[ScreenGameOver]
TimerSeconds=6
NextScreen="ScreenWarning"

ForceTimer=true
TimerStealth=true
StopMusicOnBack=true
PlayMusic=true

[TextBannerEditMode]
TitleOnCommand=halign,1;zoom,1
SubtitleOnCommand=
ArtistOnCommand=visible,false
ArtistPrependString="/"
AfterSetCommand=%TextBannerAfterSet

[EditMenu]
Arrows1X=SCREEN_CENTER_X
Arrows2X=SCREEN_CENTER_X+800
ArrowsEnabledCommand=diffuse,color("#EBC159");shadowlengthy,1;shadowcolor,color("#002740");
ArrowsDisabledCommand=diffuse,color("0.45,0.45,0.45,1");shadowlengthy,1;shadowcolor,color("#382902");

GroupBannerX=SCREEN_CENTER_X-440
GroupBannerY=SCREEN_CENTER_Y-300
GroupBannerOnCommand=scaletoclipped,384,120;draworder,-1

SongBannerX=SCREEN_CENTER_X+600
SongBannerY=SCREEN_CENTER_Y-90
SongBannerOnCommand=scaletoclipped,256,80

TextBannerType="TextBannerEditMode"
SongTextBannerX=SCREEN_CENTER_X+440
SongTextBannerY=SCREEN_CENTER_Y-60

StepsDisplayX=SCREEN_CENTER_X+620
StepsDisplayY=THEME:GetMetric("EditMenu","Row4Y")
StepsDisplaySourceX=SCREEN_CENTER_X+150
StepsDisplaySourceY=SCREEN_CENTER_Y+80

Row1Y=SCREEN_CENTER_Y-250
Row2Y=SCREEN_CENTER_Y-90
Row3Y=SCREEN_CENTER_Y
Row4Y=SCREEN_CENTER_Y+90
Row5Y=SCREEN_CENTER_Y+160
Row6Y=SCREEN_CENTER_Y+250
Row7Y=SCREEN_CENTER_Y+340

Label1X=SCREEN_CENTER_X-660
Label1Y=THEME:GetMetric("EditMenu","Row1Y")-100
Label1OnCommand=strokecolor,color("#000000");zoom,2;halign,1
Label1OffCommand=
Label2X=SCREEN_CENTER_X-200
Label2Y=THEME:GetMetric("EditMenu","Row2Y")
Label2OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label2OffCommand=
Label3X=SCREEN_CENTER_X-200
Label3Y=THEME:GetMetric("EditMenu","Row3Y")
Label3OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label3OffCommand=
Label4X=SCREEN_CENTER_X-200
Label4Y=THEME:GetMetric("EditMenu","Row4Y")
Label4OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label4OffCommand=
Label5X=SCREEN_CENTER_X-200
Label5Y=THEME:GetMetric("EditMenu","Row5Y")
Label5OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label5OffCommand=
Label6X=SCREEN_CENTER_X-200
Label6Y=THEME:GetMetric("EditMenu","Row6Y")
Label6OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label6OffCommand=
Label7X=SCREEN_CENTER_X-200
Label7Y=THEME:GetMetric("EditMenu","Row7Y")
Label7OnCommand=strokecolor,color("#000000");zoom,1.5;halign,1
Label7OffCommand=

Value1X=SCREEN_CENTER_X-260
Value1Y=THEME:GetMetric("EditMenu","Row1Y")+26
Value1OnCommand=strokecolor,color("#000000");halign,1;zoom,1.5;maxwidth,SCREEN_CENTER_X*0.45
Value1OffCommand=
Value2X=SCREEN_CENTER_X+800
Value2Y=THEME:GetMetric("EditMenu","Row2Y")
Value2OnCommand=strokecolor,color("#000000");zoom,1;maxwidth,200
Value2OffCommand=
Value3X=SCREEN_CENTER_X+720
Value3Y=THEME:GetMetric("EditMenu","Row3Y")
Value3OnCommand=strokecolor,color("#000000");zoom,1.5;maxwidth,200;halign,1
Value3OffCommand=
Value4X=SCREEN_CENTER_X+720
Value4Y=THEME:GetMetric("EditMenu","Row4Y")
Value4OnCommand=visible,false;zoom,1.5;maxwidth,200;halign,1
Value4OffCommand=
Value5X=SCREEN_CENTER_X+720
Value5Y=THEME:GetMetric("EditMenu","Row5Y")
Value5OnCommand=strokecolor,color("#000000");zoom,1.5;maxwidth,200;halign,1
Value5OffCommand=
Value6X=SCREEN_CENTER_X+720
Value6Y=THEME:GetMetric("EditMenu","Row6Y")
Value6OnCommand=strokecolor,color("#000000");zoom,1.5;maxwidth,200;halign,1
Value6OffCommand=
Value7X=SCREEN_CENTER_X+720
Value7Y=THEME:GetMetric("EditMenu","Row7Y")
Value7OnCommand=strokecolor,color("#000000");zoom,1.5;maxwidth,200;halign,1
Value7OffCommand=

[ScreenOptionsEdit]
Fallback="ScreenOptionsService"

[ScreenEditMenu]
Fallback="ScreenWithMenuElements"
Class="ScreenEditMenu"
NextScreen="ScreenEdit"
PrevScreen="ScreenOptionsEdit"
TimerSeconds=-1
ShowStyleIcon=false
ShowFooter=true
HelpText=Screen.String("HelpTextOptionsAndBack")
#
EditMenuType="EditMenu"
ExplanationX=SCREEN_CENTER_X-780
ExplanationY=SCREEN_CENTER_Y+60
ExplanationOnCommand=halign,0;valign,0;shadowlength,0;zoom,1.1;wrapwidthpixels,368;cropright,1;linear,0.5;cropright,0
NumStepsLoadedFromProfileX=SCREEN_RIGHT-180
NumStepsLoadedFromProfileY=SCREEN_TOP+42
NumStepsLoadedFromProfileOnCommand=visible,false

[StepsDisplayEdit]
ShowDescription=true
DescriptionX=-4
DescriptionY=0
MeterX=100
MeterOnCommand=zoom,1.5;halign,1
DescriptionOnCommand=shadowlength,0;uppercase,false;zoom,1.5;halign,1
FrameOnCommand=visible,false

[ScreenEdit]
Class="ScreenEdit"
Fallback="ScreenWithMenuElementsBlank"
PrepareScreens=GetEditModeSubScreens()
GroupedScreens=GetEditModeSubScreens()
PersistScreens=GetEditModeSubScreens()

EditMode="EditMode_Full"
NextScreen="ScreenEditMenu"
PrevScreen="ScreenEditMenu"
ShowHelp=false
AllowOperatorMenuButton=false
ShowCreditDisplay=false
ShowStyleIcon=false
InvertScrollSpeedButtons=false
TimerSeconds=-1
EditModifiers="no reverse"
EditHelpX=SCREEN_LEFT+4
EditHelpY=SCREEN_TOP+16
EditHelpOnCommand=halign,0;valign,0;zoom,1;shadowlength,1;maxheight,(SCREEN_HEIGHT-32)*2
InfoX=SCREEN_RIGHT-4
InfoY=SCREEN_TOP+16
InfoOnCommand=halign,1;valign,0;zoom,1;shadowlength,1;maxheight,(SCREEN_HEIGHT-32)*2
PlayRecordHelpX=SCREEN_LEFT+20
PlayRecordHelpY=SCREEN_BOTTOM-20
PlayRecordHelpOnCommand=halign,0;valign,0;shadowlength,1

SetModScreen="ScreenPlayerOptions"
OptionsScreen="ScreenEditOptions"

LoopOnChartEnd=true

CurrentBeatFormat="%s:\n  %.3f\n"
CurrentSecondFormat="%s:\n  %.3f\n"
SnapToFormat="%s: %s\n"
SelectionBeatBeginFormat="%s:\n  %.3f"
SelectionBeatUnfinishedFormat=" ...\n"
SelectionBeatEndFormat="-%.3f\n"
DifficultyFormat="%s:\n  %s\n"
RoutinePlayerFormat="%s: %d\n"
DescriptionFormat="%s:\n  %s\n"
StepAuthorFormat="%s:\n  %s\n"
ChartNameFormat="%s:\n  %s\n"
ChartStyleFormat="%s:\n  %s\n"
MainTitleFormat="%s:\n  %s\n"
SubtitleFormat="%s:\n  %s\n"
TapNoteTypeFormat="%s: %s\n"
SegmentTypeFormat="%s: %s\n"
NumStepsFormat="%s: %d\n"
NumJumpsFormat="%s: %d\n"
NumHoldsFormat="%s: %d\n"
NumMinesFormat="%s: %d\n"
NumHandsFormat="%s: %d\n"
NumRollsFormat="%s: %d\n"
NumLiftsFormat="%s: %d\n"
NumFakesFormat="%s: %d\n"
NumStepsFormatTwoPlayer="%s: %d/%d\n"
NumJumpsFormatTwoPlayer="%s: %d/%d\n"
NumHoldsFormatTwoPlayer="%s: %d/%d\n"
NumMinesFormatTwoPlayer="%s: %d/%d\n"
NumHandsFormatTwoPlayer="%s: %d/%d\n"
NumRollsFormatTwoPlayer="%s: %d/%d\n"
NumLiftsFormatTwoPlayer="%s: %d/%d\n"
NumFakesFormatTwoPlayer="%s: %d/%d\n"
TimingModeFormat="%s:\n  %s\n"
Beat0OffsetFormat="%s:\n  %.3f secs\n"
PreviewStartFormat="%s:\n  %.3f secs\n"
PreviewLengthFormat="%s:\n  %.3f secs\n"
RecordHoldTimeFormat="%s:\n  %.2f secs\n"

FadeInPreview=0
FadeOutPreview=1.5

[ScreenSelectMusicCustom]
TimerSeconds=99
Fallback="ScreenWithMenuElements"
PrevScreen=Branch.TitleMenu()
NextScreen="ScreenStageInformation"

[OptionsList]
Fallback="ScreenWithMenuElements"

PrevMenuButton=GetOptionsListMapping("PrevMenu")
NextMenuButton=GetOptionsListMapping("NextMenu")
PrevItemButton="MenuLeft"
NextItemButton="MenuRight"
CodeNames=""

TopMenus="SongMenu"
TopMenu="SongMenu"
DirectLines="TargetScore,Persp,Fail,Speed2,Accel,Appearance,Turn,Hide,Scroll,NoteSkins,Remove,Freeze,Jump,Filter,Gauge,Characters,Mini,MusicRate,GuideLine,Bias,EX,ScoreLabel,Mines,TimingWindow,Judgment,Combo"
ItemsSpacingY=45
MaxItemsBeforeSplit=16
#MaxItemsBeforeSplit=9999
ItemsSplitWidth=200

TextOnCommand=zoom,0.9;shadowlength,0.75;uppercase,true;maxwidth,260;MaskDest
TextOffCommand=
TextTweenOffCommand=stoptweening;decelerate,0.2;diffusealpha,0
TextTweenOnCommand=stoptweening;diffusealpha,0;accelerate,0.2;diffusealpha,1
TextResetCommand=

UnderlineOnCommand=MaskDest
UnderlineOffCommand=
UnderlineSetTwoRowsCommand=
UnderlineSetOneRowCommand=
UnderlineShowCommand=visible,true
UnderlineHideCommand=visible,false
UnderlineTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1
UnderlineTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
UnderlineResetCommand=

#CursorOnCommand=bounce;effectclock,'beat';effectmagnitude,-6,0,0
CursorOnCommand=MaskDest
CursorPositionTwoRowsCommand=stoptweening;decelerate,0.06
CursorPositionOneRowCommand=stoptweening;decelerate,0.06
CursorTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1
CursorTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
CursorResetCommand=

OptionsListOnCommand=
OptionsListOffCommand=
OptionsListTweenOffCommand=
OptionsListTweenOnCommand=
OptionsListResetCommand=

OptionsListTweenOutForwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenOutBackwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenInForwardCommand=playcommandonleaves,"FadeOn"
OptionsListTweenInBackwardCommand=playcommandonleaves,"FadeOn"

OptionsListFadeOffCommand=stoptweening;diffusealpha,0
OptionsListFadeOnCommand=stoptweening;diffusealpha,1

LineSongMenu="list,SongMenu"
LineAdvMenu="list,AdvMenu"
LineRemMenu="list,RemMenu"
LineSpeed2Menu="list,Speed2Menu"
LineSpeed2Type="lua,ArbitrarySpeedMods2ModType()"
LineSpeed2Value="lua,ArbitrarySpeedMods2Increment()"
LineCourseMenu="list,CourseMenu"
LineDispMenu="list,DispMenu"
LineSpeed="lua,ArbitrarySpeedMods()"
LineScoreLabel="lua,OptionRowScoreLab()"
;LineSpeed="list,Speed"
LineTargetScore="lua,OptionRowTargetScore()"
LineMini="lua,MiniSelector()"
LineAccel="list,Accel"
LineEffect="list,Effect"
LineAppearance="lua,OptionRowAppearancePlusUseFile()"
LineTurn="list,Turn"
LineHide="list,Hide"
LineScroll="list,Scroll"
#LineNoteSkins="lua,ExclusiveNoteskins()"
LineNoteSkins="list,NoteSkins"
LineFreeze="list,Freeze"
LineJump="list,Jump"
LineRemove="list,Remove"
LineGauge="lua,Gauge()"
#LineGauge="list,Gauge"
LineFilter="lua,OptionRowScreenFilter()"
LineSteps="list,Steps"
LineCharacters="lua,OptionRowCharacters()"
LineSongRate="list,SongRate"
Fallback="ScreenWithMenuElements"
LineMusicRate="lua,MusicRate()"
LineGuideLine="lua,OptionRowGuideLine()"
LineBias="lua,OptionRowBias()"
LineEX="lua,OptionRowEX()"
LineMines="list,Mines"
LineFail="list,Fail"
LineTimingWindow="lua,SmartTimings()"
LineJudgment="lua,JudgmentSel()"
LineCombo="lua,ComboSel()"
LinePersp="list,Persp"

[OptionsListP1]
Fallback="OptionsList"
TextOnCommand=halign,0

[OptionsListP2]
Fallback="OptionsList"
TextOnCommand=halign,1

[ScreenAP]
Fallback="ScreenWithMenuElements"
ShowHeader=false
ShowFooter=false

[ScreenStageInformation]
OutTransitionSeconds=1
TimerSeconds=4

[ScreenOptionsGraphicsSound]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="VideoRenderer,1,2,3,RefreshRate,FSType,4,5,6,7,8,9,10,11,13,FNR,14,17,EffV,18,19,20"
LineVideoRenderer="lua,VideoRenderer()"

[ScreenBackgroundTest]
Fallback="ScreenWithMenuElements"
PrevScreen="ScreenWarning"
ShowHeader=false
ShowFooter=false

[ScreenJukebox]
LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false
PlayerInitCommand=y,SCREEN_CENTER_Y;zoom,(THEME:GetMetric("Common","ScreenHeight")/480);draworder,-1
StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
